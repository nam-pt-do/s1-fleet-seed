


<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Dashboard Example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../components/brandkit/favicon/favicon-144px.png">

    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../components/brandkit/favicon/favicon-114px.png">

    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../components/brandkit/favicon/favicon-72px.png">

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="../../../components/brandkit/favicon/favicon.png">

    <link rel="icon" href="../../../components/brandkit/favicon/favicon.ico">
    <link href="../../../css/iids.css" rel="stylesheet" type="text/css">
    <link href="../../../css/responsive.css" rel="stylesheet" type="text/css">

    <!--[if lt IE 9]>
      <link id="theme-ie" href="../../../css/ie.css" rel="stylesheet" type="text/css">
    <![endif]-->

    

    <script src="../../../components/modernizr/modernizr.js"></script>
  </head>
  <body>

<div class="navbar navbar-static-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="../../index.html"><span class="ge-logo"></span> <span>My Application <small><i>powered by</i> GE Business</small></span></a>
      <div class="pull-right">
        <div class="btn-toolbar pull-left">
          <div class="btn-group">
            <button class="btn btn-danger dropdown-toggle" rel="tooltip" data-title="Alerts" data-placement="bottom" data-toggle="dropdown"><i class="icon-warning-sign"></i> 5</button>
            <ul class="dropdown-menu pull-right message-list">
              <li class="message-item">
                <a href="#">
                  <span class="label label-important pull-left">Urgent</span>
                  <h4 class="message-title">Alert Type and Title</h4>
                  <p>This is a brief description or summary of the associated event that occured&hellip;<br><time datetime="MM:DD:YYTHH:MM:SS" class="message-time">MM/DD/YY 12:05</time></p>
                </a>
              </li>
              <li class="message-item">
                <a href="#">
                  <span class="label label-warning pull-left">Moderate</span>
                  <h4 class="message-title">Alert Type and Title</h4>
                  <p>This is a brief description or summary of the associated event that occured&hellip;<br><time datetime="MM:DD:YYTHH:MM:SS" class="message-time">MM/DD/YY 12:05</time></p>
                </a>
              </li>
              <li class="message-item"><a href="#">View all alerts</a></li>
            </ul>
          </div>
          <div class="btn-group">
            <button class="btn btn-inverse dropdown-toggle" rel="tooltip" data-title="Messages" data-placement="bottom" data-toggle="dropdown"><i class="icon-envelope-alt"></i></button>
            <ul class="dropdown-menu pull-right message-list">
              <li class="message-item empty">No unread messages</li>
              <li class="message-item"><a href="#">View all messages</a></li>
            </ul>
          </div>
          <div class="btn-group">
            <button class="btn btn-inverse dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i><span class="user-name">Tom Edison</span> <i class="icon-chevron-down"></i></button>
            <ul class="dropdown-menu pull-right">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div>
        </div>
        <form class="navbar-search pull-left">
          <div class="input-append">
              <input type="search" class="input-medium search-query" data-toggle="dropdown" data-target=".navbar-search"><button type="submit" class="btn btn-icon"><i class="icon-search"></i></button>
          </div>
          <div class="typeahead typeahead-faceted dropdown-menu pull-right">
            <ul class="unstyled">
              <li class="facet">
                <div class="facet-name">Top Result</div>
                <ul class="facet-results unstyled">
                  <li><a href="#"><strong>Ma</strong>ine</a></li>
                </ul>
              </li>
              <li class="facet">
                <div class="facet-name">States</div>
                <ul class="facet-results unstyled">
                  <li><a href="#"><strong>Ma</strong>ine</a></li>
                  <li><a href="#"><strong>Ma</strong>ryland</a></li>
                  <li><a href="#"><strong>Ma</strong>ssachusetts</a></li>
                  <li><a href="#">Alaba<strong>ma</strong></a></li>
                </ul>
              </li>
              <li class="facet">
                <div class="facet-name">Cities</div>
                <ul class="facet-results unstyled">
                  <li><a href="#"><strong>Ma</strong>bleton, GA</a></li>
                  <li><a href="#"><strong>Ma</strong>cedon, NY</a></li>
                  <li><a href="#"><strong>Ma</strong>cedonia, OH</a></li>
                  <li><a href="#"><strong>Ma</strong>chesney Park, IL</a></li>
                  <li><a href="#"><strong>Ma</strong>comb, IL</a></li>
                </ul>
              </li>
              <li class="last"><a href="#">View All Results</a></li>
            </ul>
          </div>
        </form>
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <i class="icon-bar"></i>
          <i class="icon-bar"></i>
          <i class="icon-bar"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="primary-navbar nav-collapse">
    <div class="container">
      <ul class="nav">

        <li class="active"><a href="#">Dashboard</a></li>

        <li><a href="#">Reports</a></li>

        <li><a href="#">Tracking</a></li>

        <li><a href="#">Fleets</a></li>

        <li><a href="#">Analysis</a></li>

      </ul>

      <div class="btn-group pull-right visible-desktop">
        <button class="btn btn-inverse dropdown-toggle" data-toggle="dropdown"><i class="icon-file" style="margin-right: 9px;"></i><i class="icon-chevron-down"></i></button>
        <ul class="dropdown-menu">
          <li class="nav-header">Recently Closed</li>
          <li><a href="#">Asset 014</a></li>
          <li><a href="#">Asset 015</a></li>
          <li class="divider"></li>
          <li><a href="#">Close All Tabs</a></li>
        </ul>
      </div>

    </div>
  </div>

</div>


<div class="container content">
  <div class="page-header">
    <h1 class="pull-left voice voice-brand">Dashboard</h1>
    <div class="nav nav-pills pull-right">
      <div class="btn-group">
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Add" data-placement="bottom"><i class="icon-plus"></i></a>
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Share" data-placement="bottom"><i class="icon-share-alt"></i></a>
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Refresh" data-placement="bottom"><i class="icon-refresh"></i></a>
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Fullscreen" data-placement="bottom"><i class="icon-fullscreen"></i></a>
      </div>
    </div>
  </div>

  <!-- main page body -->
   <div class="row">

    <!-- the table section-->
    <div class="span6">
      <section class="module" style="height: 800px; overflow:auto">
        <header class="module-header">
          <h3 class="voice voice-brand pull-left">Crew Fleet Utilization</h3>
          <div class="btn-group pull-right">
            <button class="btn dropdown-toggle btn-mini" data-toggle="dropdown"><i class="icon-chevron-down"></i></button>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div>
        </header>

        <div class="module-body">
          <div>
            <form class="form-search pull-left">
              <div class="input-append">
                <input type="text" class="input-medium search-query" data-filter-table="dt-ajax-objects"><button class="btn btn-icon"><i class="icon-search"></i></button></input>
              </div>
            </form>
            <div>
              <table cellpadding="0" cellspacing="0" border="0" class="table table-bordered" data-table-name="dt-ajax-objects"></table>
            </div>
          </div>
          <footer class="module-footer"></footer>
        </section>
      </div>

      <!-- map section -->
      <div class="module-group span6">

        <section class="module" style="height: 450px; overflow:auto">
          <header class="module-header">
            <h3 class="voice voice-brand pull-left">Map title</h3>
            <div class="btn-group pull-right">
              <button class="btn dropdown-toggle btn-mini" data-toggle="dropdown"><i class="icon-chevron-down"></i></button>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
              </ul>
            </div>
          </header>
          <div class="module-body" style="height:375px">
            <div class="map" data-map-name="default"></div>
          </div>
          <footer class="module-footer"></footer>
        </section>

        <br><br>

        <!-- Chart Section -->
        <section class="module" style="height: 310px; overflow:auto">
          <header class="module-header">
            <h3 class="voice voice-brand pull-left">Fleet Utilization</h3>
            <div class="btn-group pull-right">
              <button class="btn dropdown-toggle btn-mini" data-toggle="dropdown"><i class="icon-chevron-down"></i></button>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
              </ul>
            </div>
          </header>
          <div class="module-body">
            <div id="chart" class="module-highcharts"></div>
          </div>
        </section>
      </div>
    </div>
  </div>
</body>
<script src="../../../components/requirejs/require.js"></script>
<script src="../../../js/require.config.js"></script>

<script>
    // Load common code that includes config,
    // then load the app logic for this page.
  require(['../../../js/require.config.js'], function () {
        require.config({
        baseUrl: '../../../',
        config: { 'map-loader': {
              configFileName: '../../data/map-config-cortland.json'
          }
        }
      });



  require(['jquery', 'map-search', 'datagrids', 'prettify', 'ge-bootstrap'], function($, search) {
    // Make code lovely using Google Prettify.
    window.prettyPrint && prettyPrint();

    $(function() {

      // DOM elements
      $('table[data-table-name="dt-dom"]').iidsBasicDataGrid({ 'isResponsive': true });

      $('table[data-table-name="dt-ajax-objects"]').iidsBasicDataGrid({
        'aoColumns': [
        { 'sTitle': 'Crew', 'mData': 'Number','sClass': 'essential' },
        { 'sTitle': 'Crew Type', 'mData': 'Type','sClass': 'essential' },
        { 'sTitle': 'Leader', 'mData': 'Leader','sClass': 'essential' },
        { 'sTitle': 'Status',  'mData': 'Status','sClass': 'optional' }
        ],
        'sAjaxSource': '../../data/crew_vehicles.json',
        'useFloater': false,
        'isResponsive': true
      }).on('selected', function(e, row, allSelectedRows){
            // Tell the map to go to the selected asset
            var id = "map-metadata-" + row.context.cells[0].innerText,
                query = row.context.cells[2].innerText;
            search.gotoAsset(query, id);
            $(row).removeClass('row_selected')
      });
    });
  });

  require( ['jquery', 'charts', 'iids'], function($, charts) {
    $(function() {
      var linechart = {
        el: $('#chart'),
        chart: undefined
      };

      var linechartOptions = {
        chart: {
          height: 230
        },
        xAxis: {
          type: 'datetime',
          maxPadding: 0.07,
          title: { text: '2012' }
        },
        yAxis: {
          title: { text: 'Output Power (MW)' },
        },
        series: [{
          name: 'Total Fleet',
          pointInterval: 5 * 24 * 3600 * 1000,
          pointStart: Date.UTC(2012, 0, 01),
          data: [6 , 11, 32, 110, 235, 369, 640,
          1005, 1436, 2063, 3057, 4618, 6444, 9822, 15468, 20434, 24126,
          27387, 29459, 31056, 31982, 32040, 31233, 29224, 27342, 26662,
          26956, 27912, 28999, 28965, 27826, 25579, 25722, 24826, 24605,
          24304, 23464, 23708, 24099, 24357, 24237, 24401, 24344, 23586,
          22380, 21004, 17287, 14747, 13076, 12555, 12144, 11009, 10950,
          10871, 10824, 10577, 10527, 10475, 10421, 10358, 10295, 10104]
        }]
      };

      linechart.module = linechart.el.parents('.module');
      linechart.chart = charts.line('chart', linechartOptions);

      // Build an event listener for the linechart to resize when the
      // responsive grid changes.
      $(window).on('resize', function() {
        'use strict';
        var module = linechart.module.width() - 30;
        var chart = linechart.el.width();
        if (module !== chart) {
          linechart.chart.setSize(module, linechartOptions.chart.height, false);
        }
      });
    });
  });

  require(['jquery', 'map-core', 'map-markers', 'map-zoom'], function($,Mapping,markers){

    $.subscribe('mapInitialised', function(mapName, olMap){
      $.ajax({
        url : '../../data/GeoJSON_example.json',
        async : true,
        dataType: "json",
        cache: false
      }).done(function(data) {

        $.each(data.features, function(key, val){
          this.metadata = {};
          this.id = "map-metadata-" + this.properties.Number;
          this.metadata.icon = "\uf0d1";
          this.metadata.iconPos = {"x":-8,"y": 4};
          var stt =  this.properties.Status;
          if (( stt !== undefined ) && ( stt == 'On Duty')){
            this.metadata.state = 'warning';
          }
        });

        var richPopover = '<div class="popover top" data-popover-id="{{popoverId}}"><div class="arrow"></div><header class="panel-header"><div class="left"><i class="icon-truck"></i></div><div class="popover-title panel-title voice voice-brand"><h3>Crew</h3></div><div class="right voice voice-brand"><p>{{Number}}</p></div></header><div class="popover-content panel-content"><ul class="inline"><li class="vertical-divider"><strong>Crew Type</strong><br/><strong>Status</strong><br/><strong>Crew Leader</strong></li><li class="vertical-divider">{{Type}}<br/>{{Status}}<br/>{{Leader}}</li></ul></div><footer class="panel-footer"><div class="secondary"><a class="btn btn-map"><i class="icon-phone"></i></a></div><div class="primary"><a class="btn btn-map"><i class="icon-star"></i>Bookmark</a><a class="btn btn-map"><i class="icon-pencil"></i></a></div></footer></div>';

        // Specify the data fields indexed - this allows the goto in the data table to work
        var indexOptions =  { indexAttribs : [ "Leader" ]};

        // Add Markers for top Map
        markers.addMarkers(data,olMap,{popovers:true,popoverTemplate:richPopover}, 'Crews', indexOptions);
      });
    });

    $(".map").initializeMap();
  });
});
</script>


    <script src="../../../components/respond/respond.src.js"></script>
  </body>
</html>

