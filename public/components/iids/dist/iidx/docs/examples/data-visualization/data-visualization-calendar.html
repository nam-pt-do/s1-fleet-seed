


<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Calendar Chart Example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../components/brandkit/favicon/favicon-144px.png">

    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../components/brandkit/favicon/favicon-114px.png">

    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../components/brandkit/favicon/favicon-72px.png">

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="../../../components/brandkit/favicon/favicon.png">

    <link rel="icon" href="../../../components/brandkit/favicon/favicon.ico">
    <link href="../../../css/iids.css" rel="stylesheet" type="text/css">
    <link href="../../../css/responsive.css" rel="stylesheet" type="text/css">

    <!--[if lt IE 9]>
      <link id="theme-ie" href="../../../css/ie.css" rel="stylesheet" type="text/css">
    <![endif]-->

    

    <script src="../../../components/modernizr/modernizr.js"></script>
  </head>
  <body>

<div class="navbar navbar-static-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="../../index.html"><span class="ge-logo"></span> <span>My Application <small><i>powered by</i> GE Business</small></span></a>
      <div class="pull-right">
        <div class="btn-toolbar pull-left">
          <div class="btn-group">
            <button class="btn btn-danger dropdown-toggle" rel="tooltip" data-title="Alerts" data-placement="bottom" data-toggle="dropdown"><i class="icon-warning-sign"></i> 5</button>
            <ul class="dropdown-menu pull-right message-list">
              <li class="message-item">
                <a href="#">
                  <span class="label label-important pull-left">Urgent</span>
                  <h4 class="message-title">Alert Type and Title</h4>
                  <p>This is a brief description or summary of the associated event that occured&hellip;<br><time datetime="MM:DD:YYTHH:MM:SS" class="message-time">MM/DD/YY 12:05</time></p>
                </a>
              </li>
              <li class="message-item">
                <a href="#">
                  <span class="label label-warning pull-left">Moderate</span>
                  <h4 class="message-title">Alert Type and Title</h4>
                  <p>This is a brief description or summary of the associated event that occured&hellip;<br><time datetime="MM:DD:YYTHH:MM:SS" class="message-time">MM/DD/YY 12:05</time></p>
                </a>
              </li>
              <li class="message-item"><a href="#">View all alerts</a></li>
            </ul>
          </div>
          <div class="btn-group">
            <button class="btn btn-inverse dropdown-toggle" rel="tooltip" data-title="Messages" data-placement="bottom" data-toggle="dropdown"><i class="icon-envelope-alt"></i></button>
            <ul class="dropdown-menu pull-right message-list">
              <li class="message-item empty">No unread messages</li>
              <li class="message-item"><a href="#">View all messages</a></li>
            </ul>
          </div>
          <div class="btn-group">
            <button class="btn btn-inverse dropdown-toggle" data-toggle="dropdown"><i class="icon-user"></i><span class="user-name">Tom Edison</span> <i class="icon-chevron-down"></i></button>
            <ul class="dropdown-menu pull-right">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div>
        </div>
        <form class="navbar-search pull-left">
          <div class="input-append">
              <input type="search" class="input-medium search-query" data-toggle="dropdown" data-target=".navbar-search"><button type="submit" class="btn btn-icon"><i class="icon-search"></i></button>
          </div>
          <div class="typeahead typeahead-faceted dropdown-menu pull-right">
            <ul class="unstyled">
              <li class="facet">
                <div class="facet-name">Top Result</div>
                <ul class="facet-results unstyled">
                  <li><a href="#"><strong>Ma</strong>ine</a></li>
                </ul>
              </li>
              <li class="facet">
                <div class="facet-name">States</div>
                <ul class="facet-results unstyled">
                  <li><a href="#"><strong>Ma</strong>ine</a></li>
                  <li><a href="#"><strong>Ma</strong>ryland</a></li>
                  <li><a href="#"><strong>Ma</strong>ssachusetts</a></li>
                  <li><a href="#">Alaba<strong>ma</strong></a></li>
                </ul>
              </li>
              <li class="facet">
                <div class="facet-name">Cities</div>
                <ul class="facet-results unstyled">
                  <li><a href="#"><strong>Ma</strong>bleton, GA</a></li>
                  <li><a href="#"><strong>Ma</strong>cedon, NY</a></li>
                  <li><a href="#"><strong>Ma</strong>cedonia, OH</a></li>
                  <li><a href="#"><strong>Ma</strong>chesney Park, IL</a></li>
                  <li><a href="#"><strong>Ma</strong>comb, IL</a></li>
                </ul>
              </li>
              <li class="last"><a href="#">View All Results</a></li>
            </ul>
          </div>
        </form>
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <i class="icon-bar"></i>
          <i class="icon-bar"></i>
          <i class="icon-bar"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="primary-navbar nav-collapse">
    <div class="container">
      <ul class="nav">

        <li class="active"><a href="#">Dashboard</a></li>

        <li><a href="#">Reports</a></li>

        <li><a href="#">Tracking</a></li>

        <li><a href="#">Fleets</a></li>

        <li><a href="#">Analysis</a></li>

      </ul>

      <div class="btn-group pull-right visible-desktop">
        <button class="btn btn-inverse dropdown-toggle" data-toggle="dropdown"><i class="icon-file" style="margin-right: 9px;"></i><i class="icon-chevron-down"></i></button>
        <ul class="dropdown-menu">
          <li class="nav-header">Recently Closed</li>
          <li><a href="#">Asset 014</a></li>
          <li><a href="#">Asset 015</a></li>
          <li class="divider"></li>
          <li><a href="#">Close All Tabs</a></li>
        </ul>
      </div>

    </div>
  </div>

</div>


<div class="container content">
  <div class="page-header">
    <h1 class="pull-left voice voice-brand">Dashboard</h1>
    <div class="nav nav-pills pull-right">
      <div class="btn-group">
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Add" data-placement="bottom"><i class="icon-plus"></i></a>
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Share" data-placement="bottom"><i class="icon-share-alt"></i></a>
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Refresh" data-placement="bottom"><i class="icon-refresh"></i></a>
        <a href="#" class="btn btn-icon btn-large" rel="tooltip" data-title="Fullscreen" data-placement="bottom"><i class="icon-fullscreen"></i></a>
      </div>
    </div>
  </div>

  <!-- main page body -->
   <div class="row">
    <!-- the calendar  section-->
    <div class="span7">
      <section class="module" style="overflow:auto">
        <header class="module-header">
          <h3 class="voice voice-brand pull-left">Calendar Chart</h3>
          <div class="pull-right">
              <ul class="inline">
                <li>
                  <div class="btn-group">
                    <button class="btn dropdown-toggle" data-toggle="dropdown">Theme <i class="icon-chevron-down"></i></button>
                    <ul class="dropdown-menu" id="color-theme-dropdown">
                    </ul>
                  </div>
                </li>
                <li>
                  <div class="btn-group">
                    <button class="btn dropdown-toggle" data-toggle="dropdown">Steps <i class="icon-chevron-down"></i></button>
                    <ul class="dropdown-menu" id="color-step-dropdown">
                    </ul>
                  </div>
                </li>
                <li>
                  <div class="btn-group">
                    <button class="btn dropdown-toggle" data-toggle="dropdown">Layout <i class="icon-chevron-down"></i></button>
                    <ul class="dropdown-menu" id="layout-dropdown">
                    </ul>
                  </div>
                </li>
                <li><button class="btn active" rel="tooltip" data-title="Toggle Brushing" data-placement="bottom" data-toggle="button" id="toggle-brushing"><i class="icon-magic"></i></button></li>
                <li><button class="btn active" rel="tooltip" data-title="Toggle Tooltip" data-placement="bottom" data-toggle="button" id="toggle-tooltip"><i class="icon-exclamation-sign"></i></button></li>
                <li><button class="btn active" rel="tooltip" data-title="Toggle Legend" data-placement="bottom" data-toggle="button" id="toggle-legend"><i class="icon-bar-chart"></i></button></li>
              </ul>
            </div>
        </header>

        <div class="module-body">
          <div id="myCalendar" class="calendar"></div>
        </div>
        <footer class="module-footer"></footer>
      </section>
    </div>

    <!-- usage section -->
    <div class="module-group span5">
      <section class="module" style="overflow:auto">
        <header class="module-header">
          <h3 class="voice voice-brand pull-left">Line Chart</h3>
          <div class="btn-group pull-right">
            <button class="btn dropdown-toggle btn-mini" data-toggle="dropdown"><i class="icon-chevron-down"></i></button>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div>
        </header>
        <div class="module-body">
          <div id="myChart"  class="chart"></div>
        </div>
        <footer class="module-footer"></footer>
      </section>
      <section class="module" style="overflow:auto">
        <header class="module-header">
          <h3 class="voice voice-brand pull-left">Data Grid</h3>
          <div class="btn-group pull-right">
            <button class="btn dropdown-toggle btn-mini" data-toggle="dropdown"><i class="icon-chevron-down"></i></button>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div>
        </header>
        <div class="module-body">
          <table cellpadding="0" cellspacing="0" border="0" class="table table-bordered" data-table-name="dt-ajax-objects"  id="myTable"></table>
        </div>
        <footer class="module-footer"></footer>
      </section>
    </div>
  </div>
</div>

<script src="../../../components/requirejs/require.js"></script>
<script src="../../../js/require.config.js"></script>

<script>
  require.config({
      baseUrl: '../../../'
    });

  require(['jquery', 'declarative-visualizations', 'charts','datagrids',  'iids', 'bootstrap/bootstrap-button'], function($, visualizations, charts) {
    var myCalendar = null, myTable = null, myChart = null;

    // Calendar chart
    myCalendar = visualizations.calendar('#myCalendar', {
      valueField: "CHI",
      dateField: "DATE",
      brushing: true
    })
    .on('brushend', function(d) {
      updateTable(d);
      updateChart(d);
    });

    // Data table
    myTable = $('#myTable').iidsBasicDataGrid({
      'aoColumns': [
        { 'sTitle': 'Date', 'mData': 'DATE','sClass': 'essential' },
        { 'sTitle': 'CHI Value', 'mData': 'CHI','sClass': 'essential' }
      ],
      'aaData': calendarData,
      'useFloater': false,
      'isResponsive': true
    })
    .on('selected', function(e, row, allSelectedRows){
        // Tell the map to go to the selected asset
        $(row).removeClass('row_selected')
    });

    // color theme dropdown
    var colorThemeDropdown = $('#color-theme-dropdown').empty();
    var colorThemes = ["cyan", "orange", "purple", "red", "blue"];
    colorThemes.forEach(function(d) {
      var item = $('<li><a href="#">' + d + '</a></li>').appendTo(colorThemeDropdown);
      item.data("colorTheme", d)
        .on("click", function() {
          var colorTheme = item.data("colorTheme");
          myCalendar.update(calendarData, {
            colorTheme: colorTheme
          });
        });
    });

    // color Step dropdown
    var colorStepDropdown = $('#color-step-dropdown').empty();
    var colorSteps = [2, 3, 4, 5, 8, 10];
    colorSteps.forEach(function(d) {
      var item = $('<li><a href="#">' + d + '</a></li>').appendTo(colorStepDropdown);
      item.data("colorStep", d)
        .on("click", function() {
          var colorStep = item.data("colorStep");
          myCalendar.update(calendarData, {
            colorSteps: parseInt(colorStep)
          });
        });
    });

    // layout dropdown
    var layoutDropdown = $('#layout-dropdown').empty();
    var colorThemes = ["vertical", "horizontal", "horizontal-vertical"];
    colorThemes.forEach(function(d) {
      var item = $('<li><a href="#">' + d + '</a></li>').appendTo(layoutDropdown);
      item.data("layout", d)
        .on("click", function() {
          var layout = item.data("layout");
          myCalendar.update(calendarData, {
            layout: layout
          });
        });
    });

    $("#toggle-brushing").click(function(){
      myCalendar.update(calendarData, {
        brushing: !($(this).hasClass('active'))
      });
    });

    $("#toggle-tooltip").click(function(){
      myCalendar.update(calendarData, {
        tooltip: !($(this).hasClass('active'))
      });
    });

    $("#toggle-legend").click(function(){
      myCalendar.update(calendarData, {
        legend: !($(this).hasClass('active'))
      });
    });

    var calendarData = [];
    $.getJSON("../../assets/data/outage.json", function(data){
      calendarData = data;
      myCalendar.update(calendarData);
      updateTable(calendarData);
      updateChart(calendarData);
    });

    var updateTable = function(d) {
      if (myTable === null) {
        return;
      }
      var dt = myTable.data('iidsBasicDataGrid').$table;
      dt.fnClearTable();
      dt.fnAddData(d);
    }

    var updateChart = function(d) {
      var values = d.map(function(v) {
        return [Date.parse(v.DATE), parseFloat(v.CHI)];
      });

      if (myChart === null) {
        // Highchart
        myChart = charts.stock('myChart', {
          series: [{name: 'CHI', data: values}],
          chart: {
            height: 300
          },
          legend: false,
          rangeSelector: {
            enabled: false
          },
          yAxis: {
            title: {
              text: 'CHI Value'
            },
            min: 0.0
          }
        });
      }
      else {
        myChart.series[0].setData(values);
      }

      // change the extreme to all, the data must be pre-sorted
      myChart.xAxis[0].setExtremes(Date.parse(d[0].DATE), Date.parse(d[d.length - 1].DATE));
    }
  });
</script>


    <script src="../../../components/respond/respond.src.js"></script>
  </body>
</html>

