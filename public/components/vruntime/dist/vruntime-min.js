!function(e,t){"function"==typeof define&&define.amd?define([],t):e.VRuntime=t(e.jQuery,e._,e.postal)}(this,function(e){var t,n,r;return function(e){function i(e,t){return w.call(e,t)}function a(e,t){var n,r,i,a,o,u,s,c,l,f,p,d=t&&t.split("/"),h=b.map,v=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=e.split("/"),o=e.length-1,b.nodeIdCompat&&x.test(e[o])&&(e[o]=e[o].replace(x,"")),e=d.concat(e),l=0;l<e.length;l+=1)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||v)&&h){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),d)for(f=d.length;f>0;f-=1)if(i=h[d.slice(0,f).join("/")],i&&(i=i[r])){a=i,u=l;break}if(a)break;!s&&v&&v[r]&&(s=v[r],c=l)}!a&&s&&(a=s,u=c),a&&(n.splice(0,u,a),e=n.join("/"))}return e}function o(t,n){return function(){var r=_.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),d.apply(e,r.concat([t,n]))}}function u(e){return function(t){return a(t,e)}}function s(e){return function(t){g[e]=t}}function c(t){if(i(m,t)){var n=m[t];delete m[t],y[t]=!0,p.apply(e,n)}if(!i(g,t)&&!i(y,t))throw new Error("No "+t);return g[t]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function f(e){return function(){return b&&b.config&&b.config[e]||{}}}var p,d,h,v,g={},m={},b={},y={},w=Object.prototype.hasOwnProperty,_=[].slice,x=/\.js$/;h=function(e,t){var n,r=l(e),i=r[0];return e=r[1],i&&(i=a(i,t),n=c(i)),i?e=n&&n.normalize?n.normalize(e,u(t)):a(e,t):(e=a(e,t),r=l(e),i=r[0],e=r[1],i&&(n=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},v={require:function(e){return o(e)},exports:function(e){var t=g[e];return"undefined"!=typeof t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:f(e)}}},p=function(t,n,r,a){var u,l,f,p,d,b,w=[],_=typeof r;if(a=a||t,"undefined"===_||"function"===_){for(n=!n.length&&r.length?["require","exports","module"]:n,d=0;d<n.length;d+=1)if(p=h(n[d],a),l=p.f,"require"===l)w[d]=v.require(t);else if("exports"===l)w[d]=v.exports(t),b=!0;else if("module"===l)u=w[d]=v.module(t);else if(i(g,l)||i(m,l)||i(y,l))w[d]=c(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,o(a,!0),s(l),{}),w[d]=g[l]}f=r?r.apply(g[t],w):void 0,t&&(u&&u.exports!==e&&u.exports!==g[t]?g[t]=u.exports:f===e&&b||(g[t]=f))}else t&&(g[t]=r)},t=n=d=function(t,n,r,i,a){if("string"==typeof t)return v[t]?v[t](n):c(h(t,n).f);if(!t.splice){if(b=t,b.deps&&d(b.deps,b.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=a),i?p(e,t,n,r):setTimeout(function(){p(e,t,n,r)},4),d},d.config=function(e){return d(e)},t._defined=g,r=function(e,t,n){t.splice||(n=t,t=[]),i(g,e)||i(m,e)||(m[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("../bower_components/almond/almond",function(){}),function(){function e(e,t,n){for(var r=(n||0)-1,i=e?e.length:0;++r<i;)if(e[r]===t)return r;return-1}function t(t,n){var r=typeof n;if(t=t.cache,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:b+n;return t=(t=t[r])&&t[i],"object"==r?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:b+e,i=t[n]||(t[n]={});"object"==n?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function i(e){return e.charCodeAt(0)}function a(e,t){for(var n=e.criteria,r=t.criteria,i=-1,a=n.length;++i<a;){var o=n[i],u=r[i];if(o!==u){if(o>u||"undefined"==typeof o)return 1;if(u>o||"undefined"==typeof u)return-1}}return e.index-t.index}function o(e){var t=-1,r=e.length,i=e[0],a=e[r/2|0],o=e[r-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&o&&"object"==typeof o)return!1;var u=c();u["false"]=u["null"]=u["true"]=u.undefined=!1;var s=c();for(s.array=e,s.cache=u,s.push=n;++t<r;)s.push(e[t]);return s}function u(e){return"\\"+G[e]}function s(){return v.pop()||[]}function c(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(e){e.length=0,v.length<w&&v.push(e)}function f(e){var t=e.cache;t&&f(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,g.length<w&&g.push(e)}function p(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,a=Array(0>i?0:i);++r<i;)a[r]=e[t+r];return a}function d(n){function r(e){return e&&"object"==typeof e&&!Qr(e)&&Lr.call(e,"__wrapped__")?e:new v(e)}function v(e,t){this.__chain__=!!t,this.__wrapped__=e}function g(e){function t(){if(r){var e=p(r);$r.apply(e,arguments)}if(this instanceof t){var a=G(n.prototype),o=n.apply(a,e||arguments);return Dt(o)?o:a}return n.apply(i,e||arguments)}var n=e[0],r=e[2],i=e[4];return Kr(t,e),t}function w(e,t,n,r,i){if(n){var a=n(e);if("undefined"!=typeof a)return a}var o=Dt(e);if(!o)return e;var u=Cr.call(e);if(!V[u])return e;var c=Xr[u];switch(u){case B:case F:return new c(+e);case M:case H:return new c(e);case q:return a=c(e.source,T.exec(e)),a.lastIndex=e.lastIndex,a}var f=Qr(e);if(t){var d=!r;r||(r=s()),i||(i=s());for(var h=r.length;h--;)if(r[h]==e)return i[h];a=f?c(e.length):{}}else a=f?p(e):ai({},e);return f&&(Lr.call(e,"index")&&(a.index=e.index),Lr.call(e,"input")&&(a.input=e.input)),t?(r.push(e),i.push(a),(f?Yt:si)(e,function(e,o){a[o]=w(e,t,n,r,i)}),d&&(l(r),l(i)),a):a}function G(e){return Dt(e)?Mr(e):{}}function Y(e,t,n){if("function"!=typeof e)return Qn;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(Yr.funcNames&&(r=!e.name),r=r||!Yr.funcDecomp,!r)){var i=Or.call(e);Yr.funcNames||(r=!C.test(i)),r||(r=R.test(i),Kr(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return $n(e,t)}function K(e){function t(){var e=s?o:this;if(i){var h=p(i);$r.apply(h,arguments)}if((a||l)&&(h||(h=p(arguments)),a&&$r.apply(h,a),l&&h.length<u))return r|=16,K([n,f?r:-4&r,h,null,o,u]);if(h||(h=arguments),c&&(n=e[d]),this instanceof t){e=G(n.prototype);var v=n.apply(e,h);return Dt(v)?v:e}return n.apply(e,h)}var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=1&r,c=2&r,l=4&r,f=8&r,d=n;return Kr(t,e),t}function Q(n,r){var i=-1,a=st(),u=n?n.length:0,s=u>=y&&a===e,c=[];if(s){var l=o(r);l?(a=t,r=l):s=!1}for(;++i<u;){var p=n[i];a(r,p)<0&&c.push(p)}return s&&f(r),c}function Z(e,t,n,r){for(var i=(r||0)-1,a=e?e.length:0,o=[];++i<a;){var u=e[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Qr(u)||pt(u))){t||(u=Z(u,t,n));var s=-1,c=u.length,l=o.length;for(o.length+=c;++s<c;)o[l++]=u[s]}else n||o.push(u)}return o}function tt(e,t,n,r,i,a){if(n){var o=n(e,t);if("undefined"!=typeof o)return!!o}if(e===t)return 0!==e||1/e==1/t;var u=typeof e,c=typeof t;if(!(e!==e||e&&W[u]||t&&W[c]))return!1;if(null==e||null==t)return e===t;var f=Cr.call(e),p=Cr.call(t);if(f==$&&(f=U),p==$&&(p=U),f!=p)return!1;switch(f){case B:case F:return+e==+t;case M:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case q:case H:return e==xr(t)}var d=f==I;if(!d){var h=Lr.call(e,"__wrapped__"),v=Lr.call(t,"__wrapped__");if(h||v)return tt(h?e.__wrapped__:e,v?t.__wrapped__:t,n,r,i,a);if(f!=U)return!1;var g=e.constructor,m=t.constructor;if(g!=m&&!(jt(g)&&g instanceof g&&jt(m)&&m instanceof m)&&"constructor"in e&&"constructor"in t)return!1}var b=!i;i||(i=s()),a||(a=s());for(var y=i.length;y--;)if(i[y]==e)return a[y]==t;var w=0;if(o=!0,i.push(e),a.push(t),d){if(y=e.length,w=t.length,o=w==y,o||r)for(;w--;){var _=y,x=t[w];if(r)for(;_--&&!(o=tt(e[_],x,n,r,i,a)););else if(!(o=tt(e[w],x,n,r,i,a)))break}}else ui(t,function(t,u,s){return Lr.call(s,u)?(w++,o=Lr.call(e,u)&&tt(e[u],t,n,r,i,a)):void 0}),o&&!r&&ui(e,function(e,t,n){return Lr.call(n,t)?o=--w>-1:void 0});return i.pop(),a.pop(),b&&(l(i),l(a)),o}function nt(e,t,n,r,i){(Qr(t)?Yt:si)(t,function(t,a){var o,u,s=t,c=e[a];if(t&&((u=Qr(t))||ci(t))){for(var l=r.length;l--;)if(o=r[l]==t){c=i[l];break}if(!o){var f;n&&(s=n(c,t),(f="undefined"!=typeof s)&&(c=s)),f||(c=u?Qr(c)?c:[]:ci(c)?c:{}),r.push(t),i.push(c),f||nt(c,t,n,r,i)}}else n&&(s=n(c,t),"undefined"==typeof s&&(s=t)),"undefined"!=typeof s&&(c=s);e[a]=c})}function rt(e,t){return e+Rr(Gr()*(t-e+1))}function it(n,r,i){var a=-1,u=st(),c=n?n.length:0,p=[],d=!r&&c>=y&&u===e,h=i||d?s():p;if(d){var v=o(h);u=t,h=v}for(;++a<c;){var g=n[a],m=i?i(g,a,n):g;(r?!a||h[h.length-1]!==m:u(h,m)<0)&&((i||d)&&h.push(m),p.push(g))}return d?(l(h.array),f(h)):i&&l(h),p}function at(e){return function(t,n,i){var a={};n=r.createCallback(n,i,3);var o=-1,u=t?t.length:0;if("number"==typeof u)for(;++o<u;){var s=t[o];e(a,s,n(s,o,t),t)}else si(t,function(t,r,i){e(a,t,n(t,r,i),i)});return a}}function ot(e,t,n,r,i,a){var o=1&t,u=2&t,s=4&t,c=16&t,l=32&t;if(!u&&!jt(e))throw new Sr;c&&!n.length&&(t&=-17,c=n=!1),l&&!r.length&&(t&=-33,l=r=!1);var f=e&&e.__bindData__;if(f&&f!==!0)return f=p(f),f[2]&&(f[2]=p(f[2])),f[3]&&(f[3]=p(f[3])),!o||1&f[1]||(f[4]=i),!o&&1&f[1]&&(t|=8),!s||4&f[1]||(f[5]=a),c&&$r.apply(f[2]||(f[2]=[]),n),l&&Fr.apply(f[3]||(f[3]=[]),r),f[1]|=t,ot.apply(null,f);var d=1==t||17===t?g:K;return d([e,t,n,r,i,a])}function ut(e){return ti[e]}function st(){var t=(t=r.indexOf)===bn?e:t;return t}function ct(e){return"function"==typeof e&&Nr.test(e)}function lt(e){var t,n;return e&&Cr.call(e)==U&&(t=e.constructor,!jt(t)||t instanceof t)?(ui(e,function(e,t){n=t}),"undefined"==typeof n||Lr.call(e,n)):!1}function ft(e){return ni[e]}function pt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Cr.call(e)==$||!1}function dt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),w(e,t,"function"==typeof n&&Y(n,r,1))}function ht(e,t,n){return w(e,!0,"function"==typeof t&&Y(t,n,1))}function vt(e,t){var n=G(e);return t?ai(n,t):n}function gt(e,t,n){var i;return t=r.createCallback(t,n,3),si(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function mt(e,t,n){var i;return t=r.createCallback(t,n,3),yt(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i}function bt(e,t,n){var r=[];ui(e,function(e,t){r.push(t,e)});var i=r.length;for(t=Y(t,n,3);i--&&t(r[i--],r[i],e)!==!1;);return e}function yt(e,t,n){var r=ei(e),i=r.length;for(t=Y(t,n,3);i--;){var a=r[i];if(t(e[a],a,e)===!1)break}return e}function wt(e){var t=[];return ui(e,function(e,n){jt(e)&&t.push(n)}),t.sort()}function _t(e,t){return e?Lr.call(e,t):!1}function xt(e){for(var t=-1,n=ei(e),r=n.length,i={};++t<r;){var a=n[t];i[e[a]]=a}return i}function St(e){return e===!0||e===!1||e&&"object"==typeof e&&Cr.call(e)==B||!1}function Et(e){return e&&"object"==typeof e&&Cr.call(e)==F||!1}function kt(e){return e&&1===e.nodeType||!1}function Tt(e){var t=!0;if(!e)return t;var n=Cr.call(e),r=e.length;return n==I||n==H||n==$||n==U&&"number"==typeof r&&jt(e.splice)?!r:(si(e,function(){return t=!1}),t)}function Ct(e,t,n,r){return tt(e,t,"function"==typeof n&&Y(n,r,2))}function Nt(e){return qr(e)&&!Hr(parseFloat(e))}function jt(e){return"function"==typeof e}function Dt(e){return!(!e||!W[typeof e])}function Rt(e){return At(e)&&e!=+e}function Ot(e){return null===e}function At(e){return"number"==typeof e||e&&"object"==typeof e&&Cr.call(e)==M||!1}function Lt(e){return e&&"object"==typeof e&&Cr.call(e)==q||!1}function $t(e){return"string"==typeof e||e&&"object"==typeof e&&Cr.call(e)==H||!1}function It(e){return"undefined"==typeof e}function Bt(e,t,n){var i={};return t=r.createCallback(t,n,3),si(e,function(e,n,r){i[n]=t(e,n,r)}),i}function Ft(e){var t=arguments,n=2;if(!Dt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=Y(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var i=p(arguments,1,n),a=-1,o=s(),u=s();++a<n;)nt(e,i[a],r,o,u);return l(o),l(u),e}function Pt(e,t,n){var i={};if("function"!=typeof t){var a=[];ui(e,function(e,t){a.push(t)}),a=Q(a,Z(arguments,!0,!1,1));for(var o=-1,u=a.length;++o<u;){var s=a[o];i[s]=e[s]}}else t=r.createCallback(t,n,3),ui(e,function(e,n,r){t(e,n,r)||(i[n]=e)});return i}function Mt(e){for(var t=-1,n=ei(e),r=n.length,i=hr(r);++t<r;){var a=n[t];i[t]=[a,e[a]]}return i}function Ut(e,t,n){var i={};if("function"!=typeof t)for(var a=-1,o=Z(arguments,!0,!1,1),u=Dt(e)?o.length:0;++a<u;){var s=o[a];s in e&&(i[s]=e[s])}else t=r.createCallback(t,n,3),ui(e,function(e,n,r){t(e,n,r)&&(i[n]=e)});return i}function qt(e,t,n,i){var a=Qr(e);if(null==n)if(a)n=[];else{var o=e&&e.constructor,u=o&&o.prototype;n=G(u)}return t&&(t=r.createCallback(t,i,4),(a?Yt:si)(e,function(e,r,i){return t(n,e,r,i)})),n}function Ht(e){for(var t=-1,n=ei(e),r=n.length,i=hr(r);++t<r;)i[t]=e[n[t]];return i}function Vt(e){for(var t=arguments,n=-1,r=Z(t,!0,!1,1),i=t[2]&&t[2][t[1]]===e?1:r.length,a=hr(i);++n<i;)a[n]=e[r[n]];return a}function zt(e,t,n){var r=-1,i=st(),a=e?e.length:0,o=!1;return n=(0>n?zr(0,a+n):n)||0,Qr(e)?o=i(e,t,n)>-1:"number"==typeof a?o=($t(e)?e.indexOf(t,n):i(e,t,n))>-1:si(e,function(e){return++r>=n?!(o=e===t):void 0}),o}function Jt(e,t,n){var i=!0;t=r.createCallback(t,n,3);var a=-1,o=e?e.length:0;if("number"==typeof o)for(;++a<o&&(i=!!t(e[a],a,e)););else si(e,function(e,n,r){return i=!!t(e,n,r)});return i}function Wt(e,t,n){var i=[];t=r.createCallback(t,n,3);var a=-1,o=e?e.length:0;if("number"==typeof o)for(;++a<o;){var u=e[a];t(u,a,e)&&i.push(u)}else si(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function Gt(e,t,n){t=r.createCallback(t,n,3);var i=-1,a=e?e.length:0;if("number"!=typeof a){var o;return si(e,function(e,n,r){return t(e,n,r)?(o=e,!1):void 0}),o}for(;++i<a;){var u=e[i];if(t(u,i,e))return u}}function Xt(e,t,n){var i;return t=r.createCallback(t,n,3),Kt(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}function Yt(e,t,n){var r=-1,i=e?e.length:0;if(t=t&&"undefined"==typeof n?t:Y(t,n,3),"number"==typeof i)for(;++r<i&&t(e[r],r,e)!==!1;);else si(e,t);return e}function Kt(e,t,n){var r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:Y(t,n,3),"number"==typeof r)for(;r--&&t(e[r],r,e)!==!1;);else{var i=ei(e);r=i.length,si(e,function(e,n,a){return n=i?i[--r]:--r,t(a[n],n,a)})}return e}function Qt(e,t){var n=p(arguments,2),r=-1,i="function"==typeof t,a=e?e.length:0,o=hr("number"==typeof a?a:0);return Yt(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o}function Zt(e,t,n){var i=-1,a=e?e.length:0;if(t=r.createCallback(t,n,3),"number"==typeof a)for(var o=hr(a);++i<a;)o[i]=t(e[i],i,e);else o=[],si(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function en(e,t,n){var a=-1/0,o=a;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Qr(e))for(var u=-1,s=e.length;++u<s;){var c=e[u];c>o&&(o=c)}else t=null==t&&$t(e)?i:r.createCallback(t,n,3),Yt(e,function(e,n,r){var i=t(e,n,r);i>a&&(a=i,o=e)});return o}function tn(e,t,n){var a=1/0,o=a;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Qr(e))for(var u=-1,s=e.length;++u<s;){var c=e[u];o>c&&(o=c)}else t=null==t&&$t(e)?i:r.createCallback(t,n,3),Yt(e,function(e,n,r){var i=t(e,n,r);a>i&&(a=i,o=e)});return o}function nn(e,t,n,i){if(!e)return n;var a=arguments.length<3;t=r.createCallback(t,i,4);var o=-1,u=e.length;if("number"==typeof u)for(a&&(n=e[++o]);++o<u;)n=t(n,e[o],o,e);else si(e,function(e,r,i){n=a?(a=!1,e):t(n,e,r,i)});return n}function rn(e,t,n,i){var a=arguments.length<3;return t=r.createCallback(t,i,4),Kt(e,function(e,r,i){n=a?(a=!1,e):t(n,e,r,i)}),n}function an(e,t,n){return t=r.createCallback(t,n,3),Wt(e,function(e,n,r){return!t(e,n,r)})}function on(e,t,n){if(e&&"number"!=typeof e.length&&(e=Ht(e)),null==t||n)return e?e[rt(0,e.length-1)]:h;var r=un(e);return r.length=Jr(zr(0,t),r.length),r}function un(e){var t=-1,n=e?e.length:0,r=hr("number"==typeof n?n:0);return Yt(e,function(e){var n=rt(0,++t);r[t]=r[n],r[n]=e}),r}function sn(e){var t=e?e.length:0;return"number"==typeof t?t:ei(e).length}function cn(e,t,n){var i;t=r.createCallback(t,n,3);var a=-1,o=e?e.length:0;if("number"==typeof o)for(;++a<o&&!(i=t(e[a],a,e)););else si(e,function(e,n,r){return!(i=t(e,n,r))});return!!i}function ln(e,t,n){var i=-1,o=Qr(t),u=e?e.length:0,p=hr("number"==typeof u?u:0);for(o||(t=r.createCallback(t,n,3)),Yt(e,function(e,n,r){var a=p[++i]=c();o?a.criteria=Zt(t,function(t){return e[t]}):(a.criteria=s())[0]=t(e,n,r),a.index=i,a.value=e}),u=p.length,p.sort(a);u--;){var d=p[u];p[u]=d.value,o||l(d.criteria),f(d)}return p}function fn(e){return e&&"number"==typeof e.length?p(e):Ht(e)}function pn(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function dn(e){return Q(e,Z(arguments,!0,!0,1))}function hn(e,t,n){var i=-1,a=e?e.length:0;for(t=r.createCallback(t,n,3);++i<a;)if(t(e[i],i,e))return i;return-1}function vn(e,t,n){var i=e?e.length:0;for(t=r.createCallback(t,n,3);i--;)if(t(e[i],i,e))return i;return-1}function gn(e,t,n){var i=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=r.createCallback(t,n,3);++o<a&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[0]:h;return p(e,0,Jr(zr(0,i),a))}function mn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Zt(e,n,r)),Z(e,t)}function bn(t,n,r){if("number"==typeof r){var i=t?t.length:0;r=0>r?zr(0,i+r):r||0}else if(r){var a=Cn(t,n);return t[a]===n?a:-1}return e(t,n,r)}function yn(e,t,n){var i=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var o=a;for(t=r.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else i=null==t||n?1:t||i;return p(e,0,Jr(zr(0,a-i),a))}function wn(){for(var n=[],r=-1,i=arguments.length,a=s(),u=st(),c=u===e,p=s();++r<i;){var d=arguments[r];(Qr(d)||pt(d))&&(n.push(d),a.push(c&&d.length>=y&&o(r?n[r]:p)))}var h=n[0],v=-1,g=h?h.length:0,m=[];e:for(;++v<g;){var b=a[0];if(d=h[v],(b?t(b,d):u(p,d))<0){for(r=i,(b||p).push(d);--r;)if(b=a[r],(b?t(b,d):u(n[r],d))<0)continue e;m.push(d)}}for(;i--;)b=a[i],b&&f(b);return l(a),l(p),m}function _n(e,t,n){var i=0,a=e?e.length:0;if("number"!=typeof t&&null!=t){var o=a;for(t=r.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[a-1]:h;return p(e,zr(0,a-i))}function xn(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?zr(0,r+n):Jr(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Sn(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var a=-1,o=t[n];++a<i;)e[a]===o&&(Br.call(e,a--,1),i--);return e}function En(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,i=zr(0,jr((t-e)/(n||1))),a=hr(i);++r<i;)a[r]=e,e+=n;return a}function kn(e,t,n){var i=-1,a=e?e.length:0,o=[];for(t=r.createCallback(t,n,3);++i<a;){var u=e[i];t(u,i,e)&&(o.push(u),Br.call(e,i--,1),a--)}return o}function Tn(e,t,n){if("number"!=typeof t&&null!=t){var i=0,a=-1,o=e?e.length:0;for(t=r.createCallback(t,n,3);++a<o&&t(e[a],a,e);)i++}else i=null==t||n?1:zr(0,t);return p(e,i)}function Cn(e,t,n,i){var a=0,o=e?e.length:a;for(n=n?r.createCallback(n,i,1):Qn,t=n(t);o>a;){var u=a+o>>>1;n(e[u])<t?a=u+1:o=u}return a}function Nn(){return it(Z(arguments,!0,!0))}function jn(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(n=r.createCallback(n,i,3)),it(e,t,n)}function Dn(e){return Q(e,p(arguments,1))}function Rn(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Qr(n)||pt(n))var r=r?it(Q(r,n).concat(Q(n,r))):n}return r||[]}function On(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?en(di(e,"length")):0,r=hr(0>n?0:n);++t<n;)r[t]=di(e,t);return r}function An(e,t){var n=-1,r=e?e.length:0,i={};for(t||!r||Qr(e[0])||(t=[]);++n<r;){var a=e[n];t?i[a]=t[n]:a&&(i[a[0]]=a[1])}return i}function Ln(e,t){if(!jt(t))throw new Sr;return function(){return--e<1?t.apply(this,arguments):void 0}}function $n(e,t){return arguments.length>2?ot(e,17,p(arguments,2),null,t):ot(e,1,null,null,t)}function In(e){for(var t=arguments.length>1?Z(arguments,!0,!1,1):wt(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=ot(e[i],1,null,null,e)}return e}function Bn(e,t){return arguments.length>2?ot(t,19,p(arguments,2),null,e):ot(t,3,null,null,e)}function Fn(){for(var e=arguments,t=e.length;t--;)if(!jt(e[t]))throw new Sr;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Pn(e,t){return t="number"==typeof t?t:+t||e.length,ot(e,4,null,null,null,t)}function Mn(e,t,n){var r,i,a,o,u,s,c,l=0,f=!1,p=!0;if(!jt(e))throw new Sr;if(t=zr(0,t)||0,n===!0){var d=!0;p=!1}else Dt(n)&&(d=n.leading,f="maxWait"in n&&(zr(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var v=function(){var n=t-(vi()-o);if(0>=n){i&&Dr(i);var f=c;i=s=c=h,f&&(l=vi(),a=e.apply(u,r),s||i||(r=u=null))}else s=Ir(v,n)},g=function(){s&&Dr(s),i=s=c=h,(p||f!==t)&&(l=vi(),a=e.apply(u,r),s||i||(r=u=null))};return function(){if(r=arguments,o=vi(),u=this,c=p&&(s||!d),f===!1)var n=d&&!s;else{i||d||(l=o);var h=f-(o-l),m=0>=h;m?(i&&(i=Dr(i)),l=o,a=e.apply(u,r)):i||(i=Ir(g,h))}return m&&s?s=Dr(s):s||t===f||(s=Ir(v,t)),n&&(m=!0,a=e.apply(u,r)),!m||s||i||(r=u=null),a}}function Un(e){if(!jt(e))throw new Sr;var t=p(arguments,1);return Ir(function(){e.apply(h,t)},1)}function qn(e,t){if(!jt(e))throw new Sr;var n=p(arguments,2);return Ir(function(){e.apply(h,n)},t)}function Hn(e,t){if(!jt(e))throw new Sr;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):b+arguments[0];return Lr.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function Vn(e){var t,n;if(!jt(e))throw new Sr;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function zn(e){return ot(e,16,p(arguments,1))}function Jn(e){return ot(e,32,null,p(arguments,1))}function Wn(e,t,n){var r=!0,i=!0;if(!jt(e))throw new Sr;return n===!1?r=!1:Dt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),z.leading=r,z.maxWait=t,z.trailing=i,Mn(e,t,z)}function Gn(e,t){return ot(t,16,[e])}function Xn(e){return function(){return e}}function Yn(e,t,n){var r=typeof e;if(null==e||"function"==r)return Y(e,t,n);if("object"!=r)return nr(e);var i=ei(e),a=i[0],o=e[a];return 1!=i.length||o!==o||Dt(o)?function(t){for(var n=i.length,r=!1;n--&&(r=tt(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[a];return o===t&&(0!==o||1/o==1/t)}}function Kn(e){return null==e?"":xr(e).replace(ii,ut)}function Qn(e){return e}function Zn(e,t,n){var i=!0,a=t&&wt(t);t&&(n||a.length)||(null==n&&(n=t),o=v,t=e,e=r,a=wt(t)),n===!1?i=!1:Dt(n)&&"chain"in n&&(i=n.chain);var o=e,u=jt(o);Yt(a,function(n){var r=e[n]=t[n];u&&(o.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,a=[n];$r.apply(a,arguments);var u=r.apply(e,a);if(i||t){if(n===u&&Dt(u))return this;u=new o(u),u.__chain__=t}return u})})}function er(){return n._=Tr,this}function tr(){}function nr(e){return function(t){return t[e]}}function rr(e,t,n){var r=null==e,i=null==t;if(null==n&&("boolean"==typeof e&&i?(n=e,e=1):i||"boolean"!=typeof t||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=Gr();return Jr(e+a*(t-e+parseFloat("1e-"+((a+"").length-1))),t)}return rt(e,t)}function ir(e,t){if(e){var n=e[t];return jt(n)?e[t]():n}}function ar(e,t,n){var i=r.templateSettings;e=xr(e||""),n=oi({},n,i);var a,o=oi({},n.imports,i.imports),s=ei(o),c=Ht(o),l=0,f=n.interpolate||D,p="__p += '",d=_r((n.escape||D).source+"|"+f.source+"|"+(f===N?k:D).source+"|"+(n.evaluate||D).source+"|$","g");e.replace(d,function(t,n,r,i,o,s){return r||(r=i),p+=e.slice(l,s).replace(O,u),n&&(p+="' +\n__e("+n+") +\n'"),o&&(a=!0,p+="';\n"+o+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+t.length,t}),p+="';\n";var v=n.variable,g=v;g||(v="obj",p="with ("+v+") {\n"+p+"\n}\n"),p=(a?p.replace(x,""):p).replace(S,"$1").replace(E,"$1;"),p="function("+v+") {\n"+(g?"":v+" || ("+v+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+L++ +"]")+"\n*/";try{var b=mr(s,"return "+p+m).apply(h,c)}catch(y){throw y.source=p,y}return t?b(t):(b.source=p,b)}function or(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=hr(e);for(t=Y(t,n,1);++r<e;)i[r]=t(r);return i}function ur(e){return null==e?"":xr(e).replace(ri,ft)}function sr(e){var t=++m;return xr(null==e?"":e)+t}function cr(e){return e=new v(e),e.__chain__=!0,e}function lr(e,t){return t(e),e}function fr(){return this.__chain__=!0,this}function pr(){return xr(this.__wrapped__)}function dr(){return this.__wrapped__}n=n?et.defaults(X.Object(),n,et.pick(X,A)):X;var hr=n.Array,vr=n.Boolean,gr=n.Date,mr=n.Function,br=n.Math,yr=n.Number,wr=n.Object,_r=n.RegExp,xr=n.String,Sr=n.TypeError,Er=[],kr=wr.prototype,Tr=n._,Cr=kr.toString,Nr=_r("^"+xr(Cr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),jr=br.ceil,Dr=n.clearTimeout,Rr=br.floor,Or=mr.prototype.toString,Ar=ct(Ar=wr.getPrototypeOf)&&Ar,Lr=kr.hasOwnProperty,$r=Er.push,Ir=n.setTimeout,Br=Er.splice,Fr=Er.unshift,Pr=function(){try{var e={},t=ct(t=wr.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Mr=ct(Mr=wr.create)&&Mr,Ur=ct(Ur=hr.isArray)&&Ur,qr=n.isFinite,Hr=n.isNaN,Vr=ct(Vr=wr.keys)&&Vr,zr=br.max,Jr=br.min,Wr=n.parseInt,Gr=br.random,Xr={};Xr[I]=hr,Xr[B]=vr,Xr[F]=gr,Xr[P]=mr,Xr[U]=wr,Xr[M]=yr,Xr[q]=_r,Xr[H]=xr,v.prototype=r.prototype;var Yr=r.support={};Yr.funcDecomp=!ct(n.WinRTError)&&R.test(d),Yr.funcNames="string"==typeof mr.name,r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:r}},Mr||(G=function(){function e(){}return function(t){if(Dt(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}());var Kr=Pr?function(e,t){J.value=t,Pr(e,"__bindData__",J)}:tr,Qr=Ur||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Cr.call(e)==I||!1},Zr=function(e){var t,n=e,r=[];if(!n)return r;if(!W[typeof e])return r;for(t in n)Lr.call(n,t)&&r.push(t);return r},ei=Vr?function(e){return Dt(e)?Vr(e):[]}:Zr,ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ni=xt(ti),ri=_r("("+ei(ni).join("|")+")","g"),ii=_r("["+ei(ti).join("")+"]","g"),ai=function(e,t,n){var r,i=e,a=i;if(!i)return a;var o=arguments,u=0,s="number"==typeof n?2:o.length;if(s>3&&"function"==typeof o[s-2])var c=Y(o[--s-1],o[s--],2);else s>2&&"function"==typeof o[s-1]&&(c=o[--s]);for(;++u<s;)if(i=o[u],i&&W[typeof i])for(var l=-1,f=W[typeof i]&&ei(i),p=f?f.length:0;++l<p;)r=f[l],a[r]=c?c(a[r],i[r]):i[r];return a},oi=function(e,t,n){var r,i=e,a=i;if(!i)return a;for(var o=arguments,u=0,s="number"==typeof n?2:o.length;++u<s;)if(i=o[u],i&&W[typeof i])for(var c=-1,l=W[typeof i]&&ei(i),f=l?l.length:0;++c<f;)r=l[c],"undefined"==typeof a[r]&&(a[r]=i[r]);return a},ui=function(e,t,n){var r,i=e,a=i;if(!i)return a;if(!W[typeof i])return a;t=t&&"undefined"==typeof n?t:Y(t,n,3);for(r in i)if(t(i[r],r,e)===!1)return a;return a},si=function(e,t,n){var r,i=e,a=i;if(!i)return a;if(!W[typeof i])return a;t=t&&"undefined"==typeof n?t:Y(t,n,3);for(var o=-1,u=W[typeof i]&&ei(i),s=u?u.length:0;++o<s;)if(r=u[o],t(i[r],r,e)===!1)return a;return a},ci=Ar?function(e){if(!e||Cr.call(e)!=U)return!1;var t=e.valueOf,n=ct(t)&&(n=Ar(t))&&Ar(n);return n?e==n||Ar(e)==n:lt(e)}:lt,li=at(function(e,t,n){Lr.call(e,n)?e[n]++:e[n]=1}),fi=at(function(e,t,n){(Lr.call(e,n)?e[n]:e[n]=[]).push(t)}),pi=at(function(e,t,n){e[n]=t}),di=Zt,hi=Wt,vi=ct(vi=gr.now)&&vi||function(){return(new gr).getTime()},gi=8==Wr(_+"08")?Wr:function(e,t){return Wr($t(e)?e.replace(j,""):e,t||0)};return r.after=Ln,r.assign=ai,r.at=Vt,r.bind=$n,r.bindAll=In,r.bindKey=Bn,r.chain=cr,r.compact=pn,r.compose=Fn,r.constant=Xn,r.countBy=li,r.create=vt,r.createCallback=Yn,r.curry=Pn,r.debounce=Mn,r.defaults=oi,r.defer=Un,r.delay=qn,r.difference=dn,r.filter=Wt,r.flatten=mn,r.forEach=Yt,r.forEachRight=Kt,r.forIn=ui,r.forInRight=bt,r.forOwn=si,r.forOwnRight=yt,r.functions=wt,r.groupBy=fi,r.indexBy=pi,r.initial=yn,r.intersection=wn,r.invert=xt,r.invoke=Qt,r.keys=ei,r.map=Zt,r.mapValues=Bt,r.max=en,r.memoize=Hn,r.merge=Ft,r.min=tn,r.omit=Pt,r.once=Vn,r.pairs=Mt,r.partial=zn,r.partialRight=Jn,r.pick=Ut,r.pluck=di,r.property=nr,r.pull=Sn,r.range=En,r.reject=an,r.remove=kn,r.rest=Tn,r.shuffle=un,r.sortBy=ln,r.tap=lr,r.throttle=Wn,r.times=or,r.toArray=fn,r.transform=qt,r.union=Nn,r.uniq=jn,r.values=Ht,r.where=hi,r.without=Dn,r.wrap=Gn,r.xor=Rn,r.zip=On,r.zipObject=An,r.collect=Zt,r.drop=Tn,r.each=Yt,r.eachRight=Kt,r.extend=ai,r.methods=wt,r.object=An,r.select=Wt,r.tail=Tn,r.unique=jn,r.unzip=On,Zn(r),r.clone=dt,r.cloneDeep=ht,r.contains=zt,r.escape=Kn,r.every=Jt,r.find=Gt,r.findIndex=hn,r.findKey=gt,r.findLast=Xt,r.findLastIndex=vn,r.findLastKey=mt,r.has=_t,r.identity=Qn,r.indexOf=bn,r.isArguments=pt,r.isArray=Qr,r.isBoolean=St,r.isDate=Et,r.isElement=kt,r.isEmpty=Tt,r.isEqual=Ct,r.isFinite=Nt,r.isFunction=jt,r.isNaN=Rt,r.isNull=Ot,r.isNumber=At,r.isObject=Dt,r.isPlainObject=ci,r.isRegExp=Lt,r.isString=$t,r.isUndefined=It,r.lastIndexOf=xn,r.mixin=Zn,r.noConflict=er,r.noop=tr,r.now=vi,r.parseInt=gi,r.random=rr,r.reduce=nn,r.reduceRight=rn,r.result=ir,r.runInContext=d,r.size=sn,r.some=cn,r.sortedIndex=Cn,r.template=ar,r.unescape=ur,r.uniqueId=sr,r.all=Jt,r.any=cn,r.detect=Gt,r.findWhere=Gt,r.foldl=nn,r.foldr=rn,r.include=zt,r.inject=nn,Zn(function(){var e={};return si(r,function(t,n){r.prototype[n]||(e[n]=t)}),e}(),!1),r.first=gn,r.last=_n,r.sample=on,r.take=gn,r.head=gn,si(r,function(e,t){var n="sample"!==t;r.prototype[t]||(r.prototype[t]=function(t,r){var i=this.__chain__,a=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&"function"==typeof t)?new v(a,i):a})}),r.VERSION="2.4.1",r.prototype.chain=fr,r.prototype.toString=pr,r.prototype.value=dr,r.prototype.valueOf=dr,Yt(["join","pop","shift"],function(e){var t=Er[e];r.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new v(n,e):n}}),Yt(["push","reverse","sort","unshift"],function(e){var t=Er[e];r.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Yt(["concat","slice","splice"],function(e){var t=Er[e];r.prototype[e]=function(){return new v(t.apply(this.__wrapped__,arguments),this.__chain__)}}),r}var h,v=[],g=[],m=0,b=+new Date+"",y=75,w=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",x=/\b__p \+= '';/g,S=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,T=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,j=RegExp("^["+_+"]*0+(?=.$)"),D=/($^)/,R=/\bthis\b/,O=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],L=0,$="[object Arguments]",I="[object Array]",B="[object Boolean]",F="[object Date]",P="[object Function]",M="[object Number]",U="[object Object]",q="[object RegExp]",H="[object String]",V={};V[P]=!1,V[$]=V[I]=V[B]=V[F]=V[M]=V[U]=V[q]=V[H]=!0;var z={leading:!1,maxWait:0,trailing:!1},J={configurable:!1,enumerable:!1,value:null,writable:!1},W={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=W[typeof window]&&window||this,Y=W[typeof exports]&&exports&&!exports.nodeType&&exports,K=W[typeof module]&&module&&!module.nodeType&&module,Q=K&&K.exports===Y&&Y,Z=W[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(X=Z);var et=d();"function"==typeof r&&"object"==typeof r.amd&&r.amd?(X._=et,r("underscore",[],function(){return et})):Y&&K?Q?(K.exports=et)._=et:Y._=et:X._=et}.call(this),function(e,t){"object"==typeof module&&module.exports?module.exports=function(e){return e=e||n("underscore"),t(e)}:"function"==typeof r&&r.amd?r("postal",["underscore"],function(n){return t(n,e)}):e.postal=t(e._,e)}(this,function(e,t){var n,r=function(){var t;return function(n){var r=!1;return e.isString(n)?(r=n===t,t=n):(r=e.isEqual(n,t),t=e.clone(n)),!r}},i=function(){var t=[];return function(n){var r=!e.any(t,function(t){return e.isObject(n)||e.isArray(n)?e.isEqual(n,t):n===t});return r&&t.push(n),r}},a=function(e){this.channel=e||n.configuration.DEFAULT_CHANNEL
};a.prototype.subscribe=function(){return 1===arguments.length?new o(this.channel,arguments[0].topic,arguments[0].callback):new o(this.channel,arguments[0],arguments[1])},a.prototype.publish=function(){var e=1===arguments.length?"[object String]"===Object.prototype.toString.call(arguments[0])?{topic:arguments[0]}:arguments[0]:{topic:arguments[0],data:arguments[1]};return e.channel=this.channel,n.configuration.bus.publish(e)};var o=function(e,t,r){this.channel=e,this.topic=t,this.callback=r,this.constraints=[],this.context=null,n.configuration.bus.publish({channel:n.configuration.SYSTEM_CHANNEL,topic:"subscription.created",data:{event:"subscription.created",channel:e,topic:t}}),n.configuration.bus.subscribe(this)};o.prototype={unsubscribe:function(){this.inactive||(this.inactive=!0,n.configuration.bus.unsubscribe(this),n.configuration.bus.publish({channel:n.configuration.SYSTEM_CHANNEL,topic:"subscription.removed",data:{event:"subscription.removed",channel:this.channel,topic:this.topic}}))},defer:function(){var e=this,t=this.callback;return this.callback=function(n,r){setTimeout(function(){t.call(e.context,n,r)},0)},this},disposeAfter:function(t){if(e.isNaN(t)||0>=t)throw"The value provided to disposeAfter (maxCalls) must be a number greater than zero.";var n=this,r=this.callback,i=e.after(t,e.bind(function(){this.unsubscribe()},this));return this.callback=function(){r.apply(n.context,arguments),i()},this},distinctUntilChanged:function(){return this.withConstraint(new r),this},distinct:function(){return this.withConstraint(new i),this},once:function(){return this.disposeAfter(1),this},withConstraint:function(t){if(!e.isFunction(t))throw"Predicate constraint must be a function";return this.constraints.push(t),this},withConstraints:function(t){var n=this;return e.isArray(t)&&e.each(t,function(e){n.withConstraint(e)}),n},withContext:function(e){return this.context=e,this},withDebounce:function(t,n){if(e.isNaN(t))throw"Milliseconds must be a number";var r=this.callback;return this.callback=e.debounce(r,t,!!n),this},withDelay:function(t){if(e.isNaN(t))throw"Milliseconds must be a number";var n=this,r=this.callback;return this.callback=function(e,i){setTimeout(function(){r.call(n.context,e,i)},t)},this},withThrottle:function(t){if(e.isNaN(t))throw"Milliseconds must be a number";var n=this.callback;return this.callback=e.throttle(n,t),this},subscribe:function(e){return this.callback=e,this}};var u={cache:{},regex:{},compare:function(t,n){var r,i,a,o=this.cache[n]&&this.cache[n][t];return"undefined"!=typeof o?o:((i=this.regex[t])||(r="^"+e.map(t.split("."),function(e){var t="";return a&&(t="#"!==a?"\\.\\b":"\\b"),t+="#"===e?"[\\s\\S]*":"*"===e?"[^.]+":e,a=e,t}).join("")+"$",i=this.regex[t]=new RegExp(r)),this.cache[n]=this.cache[n]||{},this.cache[n][t]=o=i.test(n),o)},reset:function(){this.cache={},this.regex={}}},s=function(t,r){!t.inactive&&n.configuration.resolver.compare(t.topic,r.topic)&&e.all(t.constraints,function(e){return e.call(t.context,r.data,r)})&&"function"==typeof t.callback&&t.callback.call(t.context,r.data,r)},c=0,l=[],f=function(){for(;l.length;)p.unsubscribe(l.shift())},p={addWireTap:function(e){var t=this;return t.wireTaps.push(e),function(){var n=t.wireTaps.indexOf(e);-1!==n&&t.wireTaps.splice(n,1)}},publish:function(t){return++c,t.timeStamp=new Date,e.each(this.wireTaps,function(e){e(t.data,t)}),this.subscriptions[t.channel]&&e.each(this.subscriptions[t.channel],function(e){for(var n,r=0,i=e.length;i>r;)(n=e[r++])&&s(n,t)}),0===--c&&f(),t},reset:function(){this.subscriptions&&(e.each(this.subscriptions,function(t){e.each(t,function(e){for(;e.length;)e.pop().unsubscribe()})}),this.subscriptions={})},subscribe:function(e){var t,n=this.subscriptions[e.channel];return n||(n=this.subscriptions[e.channel]={}),t=this.subscriptions[e.channel][e.topic],t||(t=this.subscriptions[e.channel][e.topic]=[]),t.push(e),e},subscriptions:{},wireTaps:[],unsubscribe:function(e){if(c)return void l.push(e);if(this.subscriptions[e.channel][e.topic])for(var t=this.subscriptions[e.channel][e.topic].length,n=0;t>n;){if(this.subscriptions[e.channel][e.topic][n]===e){this.subscriptions[e.channel][e.topic].splice(n,1);break}n+=1}}};if(n={configuration:{bus:p,resolver:u,DEFAULT_CHANNEL:"/",SYSTEM_CHANNEL:"postal"},ChannelDefinition:a,SubscriptionDefinition:o,channel:function(e){return new a(e)},subscribe:function(e){return new o(e.channel||n.configuration.DEFAULT_CHANNEL,e.topic,e.callback)},publish:function(e){return e.channel=e.channel||n.configuration.DEFAULT_CHANNEL,n.configuration.bus.publish(e)},addWireTap:function(e){return this.configuration.bus.addWireTap(e)},linkChannels:function(t,r){var i=[];return t=e.isArray(t)?t:[t],r=e.isArray(r)?r:[r],e.each(t,function(t){var a=t.topic||"#";e.each(r,function(r){var o=r.channel||n.configuration.DEFAULT_CHANNEL;i.push(n.subscribe({channel:t.channel||n.configuration.DEFAULT_CHANNEL,topic:a,callback:function(t,i){var a=e.clone(i);a.topic=e.isFunction(r.topic)?r.topic(i.topic):r.topic||i.topic,a.channel=o,a.data=t,n.publish(a)}}))})}),i},utils:{getSubscribersFor:function(){var e=arguments[0],t=arguments[1];return 1===arguments.length&&(e=arguments[0].channel||n.configuration.DEFAULT_CHANNEL,t=arguments[0].topic),n.configuration.bus.subscriptions[e]&&Object.prototype.hasOwnProperty.call(n.configuration.bus.subscriptions[e],t)?n.configuration.bus.subscriptions[e][t]:[]},reset:function(){n.configuration.bus.reset(),n.configuration.resolver.reset()}}},p.subscriptions[n.configuration.SYSTEM_CHANNEL]={},t&&Object.prototype.hasOwnProperty.call(t,"__postalReady__")&&e.isArray(t.__postalReady__))for(;t.__postalReady__.length;)t.__postalReady__.shift().onReady(n);return n}),function(t){"function"==typeof r&&r.amd?r("jquery.form",["jquery"],t):t("undefined"!=typeof e?e:window.Zepto)}(function(e){function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function n(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(0===i.length)return;n=i[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!==t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=r.offset();a.clk_x=t.pageX-o.left,a.clk_y=t.pageY-o.top}else a.clk_x=t.pageX-n.offsetLeft,a.clk_y=t.pageY-n.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function r(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={};i.fileapi=void 0!==e("<input type='file'/>").get(0).files,i.formdata=void 0!==window.FormData;var a=!!e.fn.prop;e.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function n(n){var r,i,a=e.param(n,t.traditional).split("&"),o=a.length,u=[];for(r=0;o>r;r++)a[r]=a[r].replace(/\+/g," "),i=a[r].split("="),u.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return u}function o(r){for(var i=new FormData,a=0;a<r.length;a++)i.append(r[a].name,r[a].value);if(t.extraData){var o=n(t.extraData);for(a=0;a<o.length;a++)o[a]&&i.append(o[a][0],o[a][1])}t.data=null;var u=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});t.uploadProgress&&(u.xhr=function(){var n=e.ajaxSettings.xhr();return n.upload&&n.upload.addEventListener("progress",function(e){var n=0,r=e.loaded||e.position,i=e.total;e.lengthComputable&&(n=Math.ceil(r/i*100)),t.uploadProgress(e,r,i,n)},!1),n}),u.data=null;var c=u.beforeSend;return u.beforeSend=function(e,n){n.data=t.formData?t.formData:i,c&&c.call(this,e,n)},e.ajax(u)}function u(n){function i(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){r("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){r("cannot get iframe.contentDocument: "+n),t=e.document}return t}function o(){function t(){try{var e=i(m).readyState;r("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(n){r("Server abort: ",n," (",n.name,")"),u(T),x&&clearTimeout(x),x=void 0}}var n=f.attr2("target"),a=f.attr2("action");S.setAttribute("target",h),(!s||/post/i.test(s))&&S.setAttribute("method","POST"),a!=p.url&&S.setAttribute("action",p.url),p.skipEncodingOverride||s&&!/post/i.test(s)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),p.timeout&&(x=setTimeout(function(){_=!0,u(k)},p.timeout));var o=[];try{if(p.extraData)for(var c in p.extraData)p.extraData.hasOwnProperty(c)&&o.push(e.isPlainObject(p.extraData[c])&&p.extraData[c].hasOwnProperty("name")&&p.extraData[c].hasOwnProperty("value")?e('<input type="hidden" name="'+p.extraData[c].name+'">').val(p.extraData[c].value).appendTo(S)[0]:e('<input type="hidden" name="'+c+'">').val(p.extraData[c]).appendTo(S)[0]);p.iframeTarget||g.appendTo("body"),m.attachEvent?m.attachEvent("onload",u):m.addEventListener("load",u,!1),setTimeout(t,15);try{S.submit()}catch(l){var d=document.createElement("form").submit;d.apply(S)}}finally{S.setAttribute("action",a),n?S.setAttribute("target",n):f.removeAttr("target"),e(o).remove()}}function u(t){if(!b.aborted&&!R){if(D=i(m),D||(r("cannot access response document"),t=T),t===k&&b)return b.abort("timeout"),void E.reject(b,"timeout");if(t==T&&b)return b.abort("server abort"),void E.reject(b,"error","server abort");if(D&&D.location.href!=p.iframeSrc||_){m.detachEvent?m.detachEvent("onload",u):m.removeEventListener("load",u,!1);var n,a="success";try{if(_)throw"timeout";var o="xml"==p.dataType||D.XMLDocument||e.isXMLDoc(D);if(r("isXml="+o),!o&&window.opera&&(null===D.body||!D.body.innerHTML)&&--O)return r("requeing onLoad callback, DOM not available"),void setTimeout(u,250);var s=D.body?D.body:D.documentElement;b.responseText=s?s.innerHTML:null,b.responseXML=D.XMLDocument?D.XMLDocument:D,o&&(p.dataType="xml"),b.getResponseHeader=function(e){var t={"content-type":p.dataType};return t[e.toLowerCase()]},s&&(b.status=Number(s.getAttribute("status"))||b.status,b.statusText=s.getAttribute("statusText")||b.statusText);var c=(p.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||p.textarea){var f=D.getElementsByTagName("textarea")[0];if(f)b.responseText=f.value,b.status=Number(f.getAttribute("status"))||b.status,b.statusText=f.getAttribute("statusText")||b.statusText;else if(l){var h=D.getElementsByTagName("pre")[0],v=D.getElementsByTagName("body")[0];h?b.responseText=h.textContent?h.textContent:h.innerText:v&&(b.responseText=v.textContent?v.textContent:v.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=A(b.responseText));try{j=$(b,c,p)}catch(y){a="parsererror",b.error=n=y||a}}catch(y){r("error caught: ",y),a="error",b.error=n=y||a}b.aborted&&(r("upload aborted"),a=null),b.status&&(a=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===a?(p.success&&p.success.call(p.context,j,"success",b),E.resolve(b.responseText,"success",b),d&&e.event.trigger("ajaxSuccess",[b,p])):a&&(void 0===n&&(n=b.statusText),p.error&&p.error.call(p.context,b,a,n),E.reject(b,"error",n),d&&e.event.trigger("ajaxError",[b,p,n])),d&&e.event.trigger("ajaxComplete",[b,p]),d&&!--e.active&&e.event.trigger("ajaxStop"),p.complete&&p.complete.call(p.context,b,a),R=!0,p.timeout&&clearTimeout(x),setTimeout(function(){p.iframeTarget?g.attr("src",p.iframeSrc):g.remove(),b.responseXML=null},100)}}}var c,l,p,d,h,g,m,b,y,w,_,x,S=f[0],E=e.Deferred();if(E.abort=function(e){b.abort(e)},n)for(l=0;l<v.length;l++)c=e(v[l]),a?c.prop("disabled",!1):c.removeAttr("disabled");if(p=e.extend(!0,{},e.ajaxSettings,t),p.context=p.context||p,h="jqFormIO"+(new Date).getTime(),p.iframeTarget?(g=e(p.iframeTarget),w=g.attr2("name"),w?h=w:g.attr2("name",h)):(g=e('<iframe name="'+h+'" src="'+p.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),m=g[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";r("aborting upload... "+n),this.aborted=1;try{m.contentWindow.document.execCommand&&m.contentWindow.document.execCommand("Stop")}catch(i){}g.attr("src",p.iframeSrc),b.error=n,p.error&&p.error.call(p.context,b,n,t),d&&e.event.trigger("ajaxError",[b,p,n]),p.complete&&p.complete.call(p.context,b,n)}},d=p.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[b,p]),p.beforeSend&&p.beforeSend.call(p.context,b,p)===!1)return p.global&&e.active--,E.reject(),E;if(b.aborted)return E.reject(),E;y=S.clk,y&&(w=y.name,w&&!y.disabled&&(p.extraData=p.extraData||{},p.extraData[w]=y.value,"image"==y.type&&(p.extraData[w+".x"]=S.clk_x,p.extraData[w+".y"]=S.clk_y)));var k=1,T=2,C=e("meta[name=csrf-token]").attr("content"),N=e("meta[name=csrf-param]").attr("content");N&&C&&(p.extraData=p.extraData||{},p.extraData[N]=C),p.forceSync?o():setTimeout(o,10);var j,D,R,O=50,A=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},L=e.parseJSON||function(e){return window.eval("("+e+")")},$=function(t,n,r){var i=t.getResponseHeader("content-type")||"",a="xml"===n||!n&&i.indexOf("xml")>=0,o=a?t.responseXML:t.responseText;return a&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),"string"==typeof o&&("json"===n||!n&&i.indexOf("json")>=0?o=L(o):("script"===n||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return r("ajaxSubmit: skipping submit process - no element selected"),this;var s,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),s=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:s||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var p={};if(this.trigger("form-pre-serialize",[this,t,p]),p.veto)return r("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return r("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var h,v=[],g=this.formToArray(t.semantic,v);if(t.data&&(t.extraData=t.data,h=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(g,this,t)===!1)return r("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,t,p]),p.veto)return r("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=e.param(g,d);h&&(m=m?m+"&"+h:h),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+m,t.data=null):t.data=m;var b=[];if(t.resetForm&&b.push(function(){f.resetForm()}),t.clearForm&&b.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};b.push(function(n){var r=t.replaceTarget?"replaceWith":"html";e(t.target)[r](n).each(y,arguments)})}else t.success&&b.push(t.success);if(t.success=function(e,n,r){for(var i=t.context||this,a=0,o=b.length;o>a;a++)b[a].apply(i,[e,n,r||f,f])},t.error){var w=t.error;t.error=function(e,n,r){var i=t.context||this;w.apply(i,[e,n,r,f])}}if(t.complete){var _=t.complete;t.complete=function(e,n){var r=t.context||this;_.apply(r,[e,n,f])}}var x=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),S=x.length>0,E="multipart/form-data",k=f.attr("enctype")==E||f.attr("encoding")==E,T=i.fileapi&&i.formdata;r("fileAPI :"+T);var C,N=(S||k)&&!T;t.iframe!==!1&&(t.iframe||N)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){C=u(g)}):C=u(g):C=(S||k)&&T?o(g):e.ajax(t),f.removeData("jqxhr").data("jqxhr",C);for(var j=0;j<v.length;j++)v[j]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&e.isFunction(e.fn.on),!i.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!e.isReady&&a.s?(r("DOM not ready, queuing ajaxForm"),e(function(){e(a.s,a.c).ajaxForm(i)}),this):(r("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return i.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,i,t).on("click.form-plugin",this.selector,i,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,t).bind("click.form-plugin",i,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var r=[];if(0===this.length)return r;var a=this[0],o=t?a.getElementsByTagName("*"):a.elements;if(!o)return r;var u,s,c,l,f,p,d;for(u=0,p=o.length;p>u;u++)if(f=o[u],c=f.name,c&&!f.disabled)if(t&&a.clk&&"image"==f.type)a.clk==f&&(r.push({name:c,value:e(f).val(),type:f.type}),r.push({name:c+".x",value:a.clk_x},{name:c+".y",value:a.clk_y}));else if(l=e.fieldValue(f,!0),l&&l.constructor==Array)for(n&&n.push(f),s=0,d=l.length;d>s;s++)r.push({name:c,value:l[s]});else if(i.fileapi&&"file"==f.type){n&&n.push(f);var h=f.files;if(h.length)for(s=0;s<h.length;s++)r.push({name:c,value:h[s],type:f.type});else r.push({name:c,value:"",type:f.type})}else null!==l&&"undefined"!=typeof l&&(n&&n.push(f),r.push({name:c,value:l,type:f.type,required:f.required}));if(!t&&a.clk){var v=e(a.clk),g=v[0];c=g.name,c&&!g.disabled&&"image"==g.type&&(r.push({name:c,value:v.val()}),r.push({name:c+".x",value:a.clk_x},{name:c+".y",value:a.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(r){var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var a=0,o=i.length;o>a;a++)n.push({name:r,value:i[a]});else null!==i&&"undefined"!=typeof i&&n.push({name:this.name,value:i})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;i>r;r++){var a=this[r],o=e.fieldValue(a,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(n,o):n.push(o))}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,a=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!r||t.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!t.checked||("submit"==i||"image"==i)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var o=t.selectedIndex;if(0>o)return null;for(var u=[],s=t.options,c="select-one"==i,l=c?o+1:s.length,f=c?o:0;l>f;f++){var p=s[f];if(p.selected){var d=p.value;if(d||(d=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),c)return d;u.push(d)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||"textarea"==i?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==i?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var r=e(this).parent("select");t&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),function(){function e(e){throw e}function t(e){return function(){return e}}function i(n){function r(e,t,n,r,a){var u=[];return e=O.j(function(){var e=t(n,a)||[];0<u.length&&(O.a.Ya(i(u),e),r&&O.r.K(r,o,[n,e,a])),u.splice(0,u.length),O.a.P(u,e)},o,{W:e,Ka:function(){return 0==u.length||!O.a.X(u[0])}}),{M:u,j:e.pa()?e:p}}function i(e){for(;e.length&&!O.a.X(e[0]);)e.splice(0,1);if(1<e.length){for(var t=e[0],n=e[e.length-1],r=[t];t!==n;){if(t=t.nextSibling,!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}return e}function d(e,t,n,r,i){var a,o,u,s,c,l=Math.min,f=Math.max,p=[],d=e.length,h=t.length,v=h-d||1,g=d+h+1;for(a=0;d>=a;a++)for(s=u,p.push(u=[]),c=l(h,a+v),o=f(0,a-1);c>=o;o++)u[o]=o?a?e[a-1]===t[o-1]?s[o-1]:l(s[o]||g,u[o-1]||g)+1:o+1:a+1;for(l=[],f=[],v=[],a=d,o=h;a||o;)h=p[a][o]-1,o&&h===p[a][o-1]?f.push(l[l.length]={status:n,value:t[--o],index:o}):a&&h===p[a-1][o]?v.push(l[l.length]={status:r,value:e[--a],index:a}):(l.push({status:"retained",value:t[--o]}),--a);if(f.length&&v.length){e=10*d;var m;for(t=n=0;(i||e>t)&&(m=f[n]);n++){for(r=0;p=v[r];r++)if(m.value===p.value){m.moved=p.index,p.moved=m.index,v.splice(r,1),t=r=0;break}t+=r}}return l.reverse()}function h(t,n,r,i,s){s=s||{};var c=t&&v(t),c=c&&c.ownerDocument,l=s.templateEngine||G;switch(O.za.vb(r,l,c),r=l.renderTemplate(r,i,s,c),("number"!=typeof r.length||0<r.length&&"number"!=typeof r[0].nodeType)&&e(Error("Template engine must return an array of DOM nodes")),c=u,n){case"replaceChildren":O.e.N(t,r),c=a;break;case"replaceNode":O.a.Ya(t,r),c=a;break;case"ignoreTargetNode":break;default:e(Error("Unknown renderMode: "+n))}return c&&(g(r,i),s.afterRender&&O.r.K(s.afterRender,o,[r,i.$data])),r}function v(e){return e.nodeType?e:0<e.length?e[0]:o}function g(e,t){if(e.length){var n=e[0],r=e[e.length-1];m(n,r,function(e){O.Da(t,e)}),m(n,r,function(e){O.s.ib(e,[t])})}}function m(e,t,n){var r;for(t=O.e.nextSibling(t);e&&(r=e)!==t;)e=O.e.nextSibling(r),(1===r.nodeType||8===r.nodeType)&&n(r)}function b(t,n,r){t=O.g.aa(t);for(var i=O.g.Q,a=0;a<t.length;a++){var o=t[a].key;if(i.hasOwnProperty(o)){var u=i[o];"function"==typeof u?(o=u(t[a].value))&&e(Error(o)):u||e(Error("This template engine does not support the '"+o+"' binding within its templates"))}}return t="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+O.g.ba(t)+" } })()})",r.createJavaScriptEvaluatorBlock(t)+n}function y(t,n,r,i){function a(e){return function(){return s[e]}}function u(){return s}var s,c,l=0;return O.j(function(){var o=r&&r instanceof O.z?r:new O.z(O.a.d(r)),f=o.$data;if(i&&O.eb(t,o),s=("function"==typeof n?n(o,t):n)||O.J.instance.getBindings(t,o)){if(0===l){l=1;for(var d in s){var h=O.c[d];h&&8===t.nodeType&&!O.e.I[d]&&e(Error("The binding '"+d+"' cannot be used with virtual elements")),h&&"function"==typeof h.init&&(h=h.init(t,a(d),u,f,o))&&h.controlsDescendantBindings&&(c!==p&&e(Error("Multiple bindings ("+c+" and "+d+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),c=d)}l=2}if(2===l)for(d in s)(h=O.c[d])&&"function"==typeof h.update&&h.update(t,a(d),u,f,o)}},o,{W:t}),{Nb:c===p}}function w(e,t,n){var r=a,i=1===t.nodeType;i&&O.e.Ta(t),(i&&n||O.J.instance.nodeHasBindings(t))&&(r=y(t,o,e,n).Nb),r&&_(e,t,!i)}function _(e,t,n){for(var r=O.e.firstChild(t);t=r;)r=O.e.nextSibling(t),w(e,t,n)}function x(e,t){var n=S(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:o}function S(t,n){for(var r=t,i=1,a=[];r=r.nextSibling;){if(E(r)&&(i--,0===i))return a;a.push(r),k(r)&&i++}return n||e(Error("Cannot find closing comment tag to match: "+t.nodeValue)),o}function E(e){return 8==e.nodeType&&(M?e.text:e.nodeValue).match(q)}function k(e){return 8==e.nodeType&&(M?e.text:e.nodeValue).match(U)}function T(e,t){for(var n=o;e!=n;)n=e,e=e.replace(B,function(e,n){return t[n]});return e}function C(){var e=[],t=[];this.save=function(n,r){var i=O.a.i(e,n);i>=0?t[i]=r:(e.push(n),t.push(r))},this.get=function(n){return n=O.a.i(e,n),n>=0?t[n]:p}}function N(e,t,n){function r(r){var a=t(e[r]);switch(typeof a){case"boolean":case"number":case"string":case"function":i[r]=a;break;case"object":case"undefined":var o=n.get(a);i[r]=o!==p?o:N(a,t,n)}}if(n=n||new C,e=t(e),"object"!=typeof e||e===o||e===p||e instanceof Date)return e;var i=e instanceof Array?[]:{};n.save(e,i);var a=e;if(a instanceof Array){for(var u=0;u<a.length;u++)r(u);"function"==typeof a.toJSON&&r("toJSON")}else for(u in a)r(u);return i}function j(e,t){if(e)if(8==e.nodeType){var n=O.s.Ua(e.nodeValue);n!=o&&t.push({sb:e,Fb:n})}else if(1==e.nodeType)for(var n=0,r=e.childNodes,i=r.length;i>n;n++)j(r[n],t)}function D(e,t,n,r){O.c[e]={init:function(e){return O.a.f.set(e,z,{}),{controlsDescendantBindings:a}},update:function(e,i,o,u,s){o=O.a.f.get(e,z),i=O.a.d(i()),u=!n!=!i;var c=!o.Za;(c||t||u!==o.qb)&&(c&&(o.Za=O.a.Ia(O.e.childNodes(e),a)),u?(c||O.e.N(e,O.a.Ia(o.Za)),O.Ea(r?r(s,i):s,e)):O.e.Y(e),o.qb=u)}},O.g.Q[e]=u,O.e.I[e]=a}function R(e,t,n){n&&t!==O.k.q(e)&&O.k.T(e,t),t!==O.k.q(e)&&O.r.K(O.a.Ba,o,[e,"change"])}var O="undefined"!=typeof n?n:{};O.b=function(e,t){for(var n=e.split("."),r=O,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},O.p=function(e,t,n){e[t]=n},O.version="2.2.1",O.b("version",O.version),O.a=new function(){function t(e,t){if("input"!==O.a.u(e)||!e.type||"click"!=t.toLowerCase())return u;var n=e.type;return"checkbox"==n||"radio"==n}var n=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,r={},i={};r[/Firefox\/2/i.test(l.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],r.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");for(var d in r){var h=r[d];if(h.length)for(var v=0,g=h.length;g>v;v++)i[h[v]]=d}var m,b={propertychange:a},r=3;for(d=c.createElement("div"),h=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->",h[0];);return m=r>4?r:p,{Na:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n])},i:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},lb:function(e,t,n){for(var r=0,i=e.length;i>r;r++)if(t.call(n,e[r]))return e[r];return o},ga:function(e,t){var n=O.a.i(e,t);n>=0&&e.splice(n,1)},Ga:function(e){e=e||[];for(var t=[],n=0,r=e.length;r>n;n++)0>O.a.i(t,e[n])&&t.push(e[n]);return t},V:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;i>r;r++)n.push(t(e[r]));return n},fa:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;i>r;r++)t(e[r])&&n.push(e[r]);return n},P:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;r>n;n++)e.push(t[n]);return e},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},ka:function(e){for(;e.firstChild;)O.removeNode(e.firstChild)},Hb:function(e){e=O.a.L(e);for(var t=c.createElement("div"),n=0,r=e.length;r>n;n++)t.appendChild(O.A(e[n]));return t},Ia:function(e,t){for(var n=0,r=e.length,i=[];r>n;n++){var o=e[n].cloneNode(a);i.push(t?O.A(o):o)}return i},N:function(e,t){if(O.a.ka(e),t)for(var n=0,r=t.length;r>n;n++)e.appendChild(t[n])},Ya:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,a=0,o=t.length;o>a;a++)i.insertBefore(t[a],r);for(a=0,o=n.length;o>a;a++)O.removeNode(n[a])}},bb:function(e,t){7>m?e.setAttribute("selected",t):e.selected=t},D:function(e){return(e||"").replace(n,"")},Rb:function(e,t){for(var n=[],r=(e||"").split(t),i=0,a=r.length;a>i;i++){var o=O.a.D(r[i]);""!==o&&n.push(o)}return n},Ob:function(e,t){return e=e||"",t.length>e.length?u:e.substring(0,t.length)===t},tb:function(e,t){if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e!=o;){if(e==t)return a;e=e.parentNode}return u},X:function(e){return O.a.tb(e,e.ownerDocument)},u:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},n:function(n,r,i){var o=m&&b[r];if(o||"undefined"==typeof f)o||"function"!=typeof n.addEventListener?"undefined"!=typeof n.attachEvent?n.attachEvent("on"+r,function(e){i.call(n,e)}):e(Error("Browser doesn't support addEventListener or attachEvent")):n.addEventListener(r,i,u);else{if(t(n,r)){var s=i;i=function(e,t){var n=this.checked;t&&(this.checked=t.nb!==a),s.call(this,e),this.checked=n}}f(n).bind(r,i)}},Ba:function(n,r){if((!n||!n.nodeType)&&e(Error("element must be a DOM node when calling triggerEvent")),"undefined"!=typeof f){var o=[];t(n,r)&&o.push({nb:n.checked}),f(n).trigger(r,o)}else"function"==typeof c.createEvent?"function"==typeof n.dispatchEvent?(o=c.createEvent(i[r]||"HTMLEvents"),o.initEvent(r,a,a,s,0,0,0,0,0,u,u,u,u,0,n),n.dispatchEvent(o)):e(Error("The supplied element doesn't support dispatchEvent")):"undefined"!=typeof n.fireEvent?(t(n,r)&&(n.checked=n.checked!==a),n.fireEvent("on"+r)):e(Error("Browser doesn't support triggering events"))},d:function(e){return O.$(e)?e():e},ua:function(e){return O.$(e)?e.t():e},da:function(e,t,n){if(t){var r=/[\w-]+/g,i=e.className.match(r)||[];O.a.o(t.match(r),function(e){var t=O.a.i(i,e);t>=0?n||i.splice(t,1):n&&i.push(e)}),e.className=i.join(" ")}},cb:function(e,t){var n=O.a.d(t);if((n===o||n===p)&&(n=""),3===e.nodeType)e.data=n;else{var r=O.e.firstChild(e);!r||3!=r.nodeType||O.e.nextSibling(r)?O.e.N(e,[c.createTextNode(n)]):r.data=n,O.a.wb(e)}},ab:function(e,t){if(e.name=t,7>=m)try{e.mergeAttributes(c.createElement("<input name='"+e.name+"'/>"),u)}catch(n){}},wb:function(e){m>=9&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},ub:function(e){if(m>=9){var t=e.style.width;e.style.width=0,e.style.width=t}},Lb:function(e,t){e=O.a.d(e),t=O.a.d(t);for(var n=[],r=e;t>=r;r++)n.push(r);return n},L:function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t},Pb:6===m,Qb:7===m,Z:m,Oa:function(e,t){for(var n=O.a.L(e.getElementsByTagName("input")).concat(O.a.L(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],a=n.length-1;a>=0;a--)r(n[a])&&i.push(n[a]);return i},Ib:function(e){return"string"==typeof e&&(e=O.a.D(e))?s.JSON&&s.JSON.parse?s.JSON.parse(e):new Function("return "+e)():o},xa:function(t,n,r){return("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&e(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")),JSON.stringify(O.a.d(t),n,r)},Jb:function(e,t,n){n=n||{};var r=n.params||{},i=n.includeFields||this.Na,a=e;if("object"==typeof e&&"form"===O.a.u(e))for(var a=e.action,o=i.length-1;o>=0;o--)for(var u=O.a.Oa(e,i[o]),s=u.length-1;s>=0;s--)r[u[s].name]=u[s].value;t=O.a.d(t);var l=c.createElement("form");l.style.display="none",l.action=a,l.method="post";for(var f in t)e=c.createElement("input"),e.name=f,e.value=O.a.xa(O.a.d(t[f])),l.appendChild(e);for(f in r)e=c.createElement("input"),e.name=f,e.value=r[f],l.appendChild(e);c.body.appendChild(l),n.submitter?n.submitter(l):l.submit(),setTimeout(function(){l.parentNode.removeChild(l)},0)}}},O.b("utils",O.a),O.b("utils.arrayForEach",O.a.o),O.b("utils.arrayFirst",O.a.lb),O.b("utils.arrayFilter",O.a.fa),O.b("utils.arrayGetDistinctValues",O.a.Ga),O.b("utils.arrayIndexOf",O.a.i),O.b("utils.arrayMap",O.a.V),O.b("utils.arrayPushAll",O.a.P),O.b("utils.arrayRemoveItem",O.a.ga),O.b("utils.extend",O.a.extend),O.b("utils.fieldsIncludedWithJsonPost",O.a.Na),O.b("utils.getFormFields",O.a.Oa),O.b("utils.peekObservable",O.a.ua),O.b("utils.postJson",O.a.Jb),O.b("utils.parseJson",O.a.Ib),O.b("utils.registerEventHandler",O.a.n),O.b("utils.stringifyJson",O.a.xa),O.b("utils.range",O.a.Lb),O.b("utils.toggleDomNodeCssClass",O.a.da),O.b("utils.triggerEvent",O.a.Ba),O.b("utils.unwrapObservable",O.a.d),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);
return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),O.a.f=new function(){var e=0,t="__ko__"+(new Date).getTime(),n={};return{get:function(e,t){var n=O.a.f.la(e,u);return n===p?p:n[t]},set:function(e,t,n){n===p&&O.a.f.la(e,u)===p||(O.a.f.la(e,a)[t]=n)},la:function(r,i){var a=r[t];if(!a||"null"===a||!n[a]){if(!i)return p;a=r[t]="ko"+e++,n[a]={}}return n[a]},clear:function(e){var r=e[t];return r?(delete n[r],e[t]=o,a):u}}},O.b("utils.domData",O.a.f),O.b("utils.domData.clear",O.a.f.clear),O.a.F=new function(){function t(e,t){var n=O.a.f.get(e,r);return n===p&&t&&(n=[],O.a.f.set(e,r,n)),n}function n(e){var r=t(e,u);if(r)for(var r=r.slice(0),i=0;i<r.length;i++)r[i](e);if(O.a.f.clear(e),"function"==typeof f&&"function"==typeof f.cleanData&&f.cleanData([e]),o[e.nodeType])for(r=e.firstChild;e=r;)r=e.nextSibling,8===e.nodeType&&n(e)}var r="__ko_domNodeDisposal__"+(new Date).getTime(),i={1:a,8:a,9:a},o={1:a,9:a};return{Ca:function(n,r){"function"!=typeof r&&e(Error("Callback must be a function")),t(n,a).push(r)},Xa:function(e,n){var i=t(e,u);i&&(O.a.ga(i,n),0==i.length&&O.a.f.set(e,r,p))},A:function(e){if(i[e.nodeType]&&(n(e),o[e.nodeType])){var t=[];O.a.P(t,e.getElementsByTagName("*"));for(var r=0,a=t.length;a>r;r++)n(t[r])}return e},removeNode:function(e){O.A(e),e.parentNode&&e.parentNode.removeChild(e)}}},O.A=O.a.F.A,O.removeNode=O.a.F.removeNode,O.b("cleanNode",O.A),O.b("removeNode",O.removeNode),O.b("utils.domNodeDisposal",O.a.F),O.b("utils.domNodeDisposal.addDisposeCallback",O.a.F.Ca),O.b("utils.domNodeDisposal.removeDisposeCallback",O.a.F.Xa),O.a.ta=function(e){var t;if("undefined"!=typeof f){if(f.parseHTML)t=f.parseHTML(e);else if((t=f.clean([e]))&&t[0]){for(e=t[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var n=O.a.D(e).toLowerCase();for(t=c.createElement("div"),n=n.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!n.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!n.indexOf("<td")||!n.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+n[1]+e+n[2]+"</div>","function"==typeof s.innerShiv?t.appendChild(s.innerShiv(e)):t.innerHTML=e;n[0]--;)t=t.lastChild;t=O.a.L(t.lastChild.childNodes)}return t},O.a.ca=function(e,t){if(O.a.ka(e),t=O.a.d(t),t!==o&&t!==p)if("string"!=typeof t&&(t=t.toString()),"undefined"!=typeof f)f(e).html(t);else for(var n=O.a.ta(t),r=0;r<n.length;r++)e.appendChild(n[r])},O.b("utils.parseHtmlFragment",O.a.ta),O.b("utils.setHtml",O.a.ca);var A={};O.s={ra:function(t){"function"!=typeof t&&e(Error("You can only pass a function to ko.memoization.memoize()"));var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return A[n]=t,"<!--[ko_memo:"+n+"]-->"},hb:function(t,n){var r=A[t];r===p&&e(Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized."));try{return r.apply(o,n||[]),a}finally{delete A[t]}},ib:function(e,t){var n=[];j(e,n);for(var r=0,i=n.length;i>r;r++){var a=n[r].sb,o=[a];t&&O.a.P(o,t),O.s.hb(n[r].Fb,o),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},Ua:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:o}},O.b("memoization",O.s),O.b("memoization.memoize",O.s.ra),O.b("memoization.unmemoize",O.s.hb),O.b("memoization.parseMemoText",O.s.Ua),O.b("memoization.unmemoizeDomNodeAndDescendants",O.s.ib),O.Ma={throttle:function(e,t){e.throttleEvaluation=t;var n=o;return O.j({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,n){return e.equalityComparer="always"==n?t(u):O.m.fn.equalityComparer,e}},O.b("extenders",O.Ma),O.fb=function(e,t,n){this.target=e,this.ha=t,this.rb=n,O.p(this,"dispose",this.B)},O.fb.prototype.B=function(){this.Cb=a,this.rb()},O.S=function(){this.w={},O.a.extend(this,O.S.fn),O.p(this,"subscribe",this.ya),O.p(this,"extend",this.extend),O.p(this,"getSubscriptionsCount",this.yb)},O.S.fn={ya:function(e,t,n){n=n||"change";var r=new O.fb(this,t?e.bind(t):e,function(){O.a.ga(this.w[n],r)}.bind(this));return this.w[n]||(this.w[n]=[]),this.w[n].push(r),r},notifySubscribers:function(e,t){t=t||"change",this.w[t]&&O.r.K(function(){O.a.o(this.w[t].slice(0),function(t){t&&t.Cb!==a&&t.ha(e)})},this)},yb:function(){var e,t=0;for(e in this.w)this.w.hasOwnProperty(e)&&(t+=this.w[e].length);return t},extend:function(e){var t=this;if(e)for(var n in e){var r=O.Ma[n];"function"==typeof r&&(t=r(t,e[n]))}return t}},O.Qa=function(e){return"function"==typeof e.ya&&"function"==typeof e.notifySubscribers},O.b("subscribable",O.S),O.b("isSubscribable",O.Qa);var L=[];O.r={mb:function(e){L.push({ha:e,La:[]})},end:function(){L.pop()},Wa:function(t){if(O.Qa(t)||e(Error("Only subscribable things can act as dependencies")),0<L.length){var n=L[L.length-1];n&&!(0<=O.a.i(n.La,t))&&(n.La.push(t),n.ha(t))}},K:function(e,t,n){try{return L.push(o),e.apply(t,n||[])}finally{L.pop()}}};var $={undefined:a,"boolean":a,number:a,string:a};O.m=function(e){function t(){return 0<arguments.length?(t.equalityComparer&&t.equalityComparer(n,arguments[0])||(t.H(),n=arguments[0],t.G()),this):(O.r.Wa(t),n)}var n=e;return O.S.call(t),t.t=function(){return n},t.G=function(){t.notifySubscribers(n)},t.H=function(){t.notifySubscribers(n,"beforeChange")},O.a.extend(t,O.m.fn),O.p(t,"peek",t.t),O.p(t,"valueHasMutated",t.G),O.p(t,"valueWillMutate",t.H),t},O.m.fn={equalityComparer:function(e,t){return e===o||typeof e in $?e===t:u}};var I=O.m.Kb="__ko_proto__";O.m.fn[I]=O.m,O.ma=function(e,t){return e===o||e===p||e[I]===p?u:e[I]===t?a:O.ma(e[I],t)},O.$=function(e){return O.ma(e,O.m)},O.Ra=function(e){return"function"==typeof e&&e[I]===O.m||"function"==typeof e&&e[I]===O.j&&e.zb?a:u},O.b("observable",O.m),O.b("isObservable",O.$),O.b("isWriteableObservable",O.Ra),O.R=function(t){0==arguments.length&&(t=[]),t!==o&&t!==p&&!("length"in t)&&e(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var n=O.m(t);return O.a.extend(n,O.R.fn),n},O.R.fn={remove:function(e){for(var t=this.t(),n=[],r="function"==typeof e?e:function(t){return t===e},i=0;i<t.length;i++){var a=t[i];r(a)&&(0===n.length&&this.H(),n.push(a),t.splice(i,1),i--)}return n.length&&this.G(),n},removeAll:function(e){if(e===p){var t=this.t(),n=t.slice(0);return this.H(),t.splice(0,t.length),this.G(),n}return e?this.remove(function(t){return 0<=O.a.i(e,t)}):[]},destroy:function(e){var t=this.t(),n="function"==typeof e?e:function(t){return t===e};this.H();for(var r=t.length-1;r>=0;r--)n(t[r])&&(t[r]._destroy=a);this.G()},destroyAll:function(e){return e===p?this.destroy(t(a)):e?this.destroy(function(t){return 0<=O.a.i(e,t)}):[]},indexOf:function(e){var t=this();return O.a.i(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.H(),this.t()[n]=t,this.G())}},O.a.o("pop push reverse shift sort splice unshift".split(" "),function(e){O.R.fn[e]=function(){var t=this.t();return this.H(),t=t[e].apply(t,arguments),this.G(),t}}),O.a.o(["slice"],function(e){O.R.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),O.b("observableArray",O.R),O.j=function(n,r,i){function s(){O.a.o(x,function(e){e.B()}),x=[]}function c(){var e=f.throttleEvaluation;e&&e>=0?(clearTimeout(S),S=setTimeout(l,e)):l()}function l(){if(!g)if(v&&w())_();else{g=a;try{var e=O.a.V(x,function(e){return e.target});O.r.mb(function(t){var n;0<=(n=O.a.i(e,t))?e[n]=p:x.push(t.ya(c))});for(var t=m.call(r),n=e.length-1;n>=0;n--)e[n]&&x.splice(n,1)[0].B();v=a,f.notifySubscribers(h,"beforeChange"),h=t}finally{O.r.end()}f.notifySubscribers(h),g=u,x.length||_()}}function f(){return 0<arguments.length?("function"==typeof b?b.apply(r,arguments):e(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this):(v||l(),O.r.Wa(f),h)}function d(){return!v||0<x.length}var h,v=u,g=u,m=n;m&&"object"==typeof m?(i=m,m=i.read):(i=i||{},m||(m=i.read)),"function"!=typeof m&&e(Error("Pass a function that returns the value of the ko.computed"));var b=i.write,y=i.disposeWhenNodeIsRemoved||i.W||o,w=i.disposeWhen||i.Ka||t(u),_=s,x=[],S=o;if(r||(r=i.owner),f.t=function(){return v||l(),h},f.xb=function(){return x.length},f.zb="function"==typeof i.write,f.B=function(){_()},f.pa=d,O.S.call(f),O.a.extend(f,O.j.fn),O.p(f,"peek",f.t),O.p(f,"dispose",f.B),O.p(f,"isActive",f.pa),O.p(f,"getDependenciesCount",f.xb),i.deferEvaluation!==a&&l(),y&&d()){_=function(){O.a.F.Xa(y,arguments.callee),s()},O.a.F.Ca(y,_);var E=w,w=function(){return!O.a.X(y)||E()}}return f},O.Bb=function(e){return O.ma(e,O.j)},n=O.m.Kb,O.j[n]=O.m,O.j.fn={},O.j.fn[n]=O.j,O.b("dependentObservable",O.j),O.b("computed",O.j),O.b("isComputed",O.Bb),O.gb=function(t){return 0==arguments.length&&e(Error("When calling ko.toJS, pass the object you want to convert.")),N(t,function(e){for(var t=0;O.$(e)&&10>t;t++)e=e();return e})},O.toJSON=function(e,t,n){return e=O.gb(e),O.a.xa(e,t,n)},O.b("toJS",O.gb),O.b("toJSON",O.toJSON),O.k={q:function(e){switch(O.a.u(e)){case"option":return e.__ko__hasDomDataOptionValue__===a?O.a.f.get(e,O.c.options.sa):7>=O.a.Z?e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?O.k.q(e.options[e.selectedIndex]):p;default:return e.value}},T:function(e,t){switch(O.a.u(e)){case"option":switch(typeof t){case"string":O.a.f.set(e,O.c.options.sa,p),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:O.a.f.set(e,O.c.options.sa,t),e.__ko__hasDomDataOptionValue__=a,e.value="number"==typeof t?t:""}break;case"select":for(var n=e.options.length-1;n>=0;n--)if(O.k.q(e.options[n])==t){e.selectedIndex=n;break}break;default:(t===o||t===p)&&(t=""),e.value=t}}},O.b("selectExtensions",O.k),O.b("selectExtensions.readValue",O.k.q),O.b("selectExtensions.writeValue",O.k.T);var B=/\@ko_token_(\d+)\@/g,F=["true","false"],P=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;O.g={Q:[],aa:function(e){var t=O.a.D(e);if(3>t.length)return[];"{"===t.charAt(0)&&(t=t.substring(1,t.length-1)),e=[];for(var n,r=o,i=0;i<t.length;i++){var a=t.charAt(i);if(r===o)switch(a){case'"':case"'":case"/":r=i,n=a}else if(a==n&&"\\"!==t.charAt(i-1)){a=t.substring(r,i+1),e.push(a);var u="@ko_token_"+(e.length-1)+"@",t=t.substring(0,r)+u+t.substring(i+1),i=i-(a.length-u.length),r=o}}n=r=o;for(var s=0,c=o,i=0;i<t.length;i++){if(a=t.charAt(i),r===o)switch(a){case"{":r=i,c=a,n="}";break;case"(":r=i,c=a,n=")";break;case"[":r=i,c=a,n="]"}a===c?s++:a===n&&(s--,0===s&&(a=t.substring(r,i+1),e.push(a),u="@ko_token_"+(e.length-1)+"@",t=t.substring(0,r)+u+t.substring(i+1),i-=a.length-u.length,r=o))}for(n=[],t=t.split(","),r=0,i=t.length;i>r;r++)s=t[r],c=s.indexOf(":"),c>0&&c<s.length-1?(a=s.substring(c+1),n.push({key:T(s.substring(0,c),e),value:T(a,e)})):n.push({unknown:T(s,e)});return n},ba:function(e){var t="string"==typeof e?O.g.aa(e):e,n=[];e=[];for(var r,i=0;r=t[i];i++)if(0<n.length&&n.push(","),r.key){var a;e:{a=r.key;var s=O.a.D(a);switch(s.length&&s.charAt(0)){case"'":case'"':break e;default:a="'"+s+"'"}}r=r.value,n.push(a),n.push(":"),n.push(r),r=O.a.D(r),0<=O.a.i(F,O.a.D(r).toLowerCase())?r=u:(s=r.match(P),r=s===o?u:s[1]?"Object("+s[1]+")"+s[2]:r),r&&(0<e.length&&e.push(", "),e.push(a+" : function(__ko_value) { "+r+" = __ko_value; }"))}else r.unknown&&n.push(r.unknown);return t=n.join(""),0<e.length&&(t=t+", '_ko_property_writers' : { "+e.join("")+" } "),t},Eb:function(e,t){for(var n=0;n<e.length;n++)if(O.a.D(e[n].key)==t)return a;return u},ea:function(e,t,n,r,i){e&&O.Ra(e)?(!i||e.t()!==r)&&e(r):(e=t()._ko_property_writers)&&e[n]&&e[n](r)}},O.b("expressionRewriting",O.g),O.b("expressionRewriting.bindingRewriteValidators",O.g.Q),O.b("expressionRewriting.parseObjectLiteral",O.g.aa),O.b("expressionRewriting.preProcessBindings",O.g.ba),O.b("jsonExpressionRewriting",O.g),O.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",O.g.ba);var M="<!--test-->"===c.createComment("test").text,U=M?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,q=M?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,H={ul:a,ol:a};O.e={I:{},childNodes:function(e){return k(e)?S(e):e.childNodes},Y:function(e){if(k(e)){e=O.e.childNodes(e);for(var t=0,n=e.length;n>t;t++)O.removeNode(e[t])}else O.a.ka(e)},N:function(e,t){if(k(e)){O.e.Y(e);for(var n=e.nextSibling,r=0,i=t.length;i>r;r++)n.parentNode.insertBefore(t[r],n)}else O.a.N(e,t)},Va:function(e,t){k(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},Pa:function(e,t,n){n?k(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):O.e.Va(e,t)},firstChild:function(e){return k(e)?!e.nextSibling||E(e.nextSibling)?o:e.nextSibling:e.firstChild},nextSibling:function(e){return k(e)&&(e=x(e)),e.nextSibling&&E(e.nextSibling)?o:e.nextSibling},jb:function(e){return(e=k(e))?e[1]:o},Ta:function(e){if(H[O.a.u(e)]){var t=e.firstChild;if(t)do if(1===t.nodeType){var n;n=t.firstChild;var r=o;if(n)do if(r)r.push(n);else if(k(n)){var i=x(n,a);i?n=i:r=[n]}else E(n)&&(r=[n]);while(n=n.nextSibling);if(n=r)for(r=t.nextSibling,i=0;i<n.length;i++)r?e.insertBefore(n[i],r):e.appendChild(n[i])}while(t=t.nextSibling)}}},O.b("virtualElements",O.e),O.b("virtualElements.allowedBindings",O.e.I),O.b("virtualElements.emptyNode",O.e.Y),O.b("virtualElements.insertAfter",O.e.Pa),O.b("virtualElements.prepend",O.e.Va),O.b("virtualElements.setDomNodeChildren",O.e.N),O.J=function(){this.Ha={}},O.a.extend(O.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind")!=o;case 8:return O.e.jb(e)!=o;default:return u}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):o},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return O.e.jb(e);default:return o}},parseBindingsString:function(t,n,r){try{var i;if(!(i=this.Ha[t])){var a,o=this.Ha,u="with($context){with($data||{}){return{"+O.g.ba(t)+"}}}";a=new Function("$context","$element",u),i=o[t]=a}return i(n,r)}catch(s){e(Error("Unable to parse bindings.\nMessage: "+s+";\nBindings value: "+t))}}}),O.J.instance=new O.J,O.b("bindingProvider",O.J),O.c={},O.z=function(e,t,n){t?(O.a.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e,this.ko=O),this.$data=e,n&&(this[n]=e)},O.z.prototype.createChildContext=function(e,t){return new O.z(e,this,t)},O.z.prototype.extend=function(e){var t=O.a.extend(new O.z,this);return O.a.extend(t,e)},O.eb=function(e,t){return 2!=arguments.length?O.a.f.get(e,"__ko_bindingContext__"):void O.a.f.set(e,"__ko_bindingContext__",t)},O.Fa=function(e,t,n){return 1===e.nodeType&&O.e.Ta(e),y(e,t,n,a)},O.Ea=function(e,t){(1===t.nodeType||8===t.nodeType)&&_(e,t,a)},O.Da=function(t,n){n&&1!==n.nodeType&&8!==n.nodeType&&e(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")),n=n||s.document.body,w(t,n,a)},O.ja=function(e){switch(e.nodeType){case 1:case 8:var t=O.eb(e);if(t)return t;if(e.parentNode)return O.ja(e.parentNode)}return p},O.pb=function(e){return(e=O.ja(e))?e.$data:p},O.b("bindingHandlers",O.c),O.b("applyBindings",O.Da),O.b("applyBindingsToDescendants",O.Ea),O.b("applyBindingsToNode",O.Fa),O.b("contextFor",O.ja),O.b("dataFor",O.pb);var V={"class":"className","for":"htmlFor"};O.c.attr={update:function(e,t){var n,r=O.a.d(t())||{};for(n in r)if("string"==typeof n){var i=O.a.d(r[n]),a=i===u||i===o||i===p;a&&e.removeAttribute(n),8>=O.a.Z&&n in V?(n=V[n],a?e.removeAttribute(n):e[n]=i):a||e.setAttribute(n,i.toString()),"name"===n&&O.a.ab(e,a?"":i.toString())}}},O.c.checked={init:function(e,n,r){O.a.n(e,"click",function(){var t;if("checkbox"==e.type)t=e.checked;else{if("radio"!=e.type||!e.checked)return;t=e.value}var i=n(),o=O.a.d(i);"checkbox"==e.type&&o instanceof Array?(t=O.a.i(o,e.value),e.checked&&0>t?i.push(e.value):!e.checked&&t>=0&&i.splice(t,1)):O.g.ea(i,r,"checked",t,a)}),"radio"==e.type&&!e.name&&O.c.uniqueName.init(e,t(a))},update:function(e,t){var n=O.a.d(t());"checkbox"==e.type?e.checked=n instanceof Array?0<=O.a.i(n,e.value):n:"radio"==e.type&&(e.checked=e.value==n)}},O.c.css={update:function(e,t){var n=O.a.d(t());if("object"==typeof n)for(var r in n){var i=O.a.d(n[r]);O.a.da(e,r,i)}else n=String(n||""),O.a.da(e,e.__ko__cssValue,u),e.__ko__cssValue=n,O.a.da(e,n,a)}},O.c.enable={update:function(e,t){var n=O.a.d(t());n&&e.disabled?e.removeAttribute("disabled"):!n&&!e.disabled&&(e.disabled=a)}},O.c.disable={update:function(e,t){O.c.enable.update(e,function(){return!O.a.d(t())})}},O.c.event={init:function(e,t,n,r){var i,o=t()||{};for(i in o)(function(){var o=i;"string"==typeof o&&O.a.n(e,o,function(e){var i,s=t()[o];if(s){var c=n();try{var l=O.a.L(arguments);l.unshift(r),i=s.apply(r,l)}finally{i!==a&&(e.preventDefault?e.preventDefault():e.returnValue=u)}c[o+"Bubble"]===u&&(e.cancelBubble=a,e.stopPropagation&&e.stopPropagation())}})})()}},O.c.foreach={Sa:function(e){return function(){var t=e(),n=O.a.ua(t);return n&&"number"!=typeof n.length?(O.a.d(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:O.C.oa}):{foreach:t,templateEngine:O.C.oa}}},init:function(e,t){return O.c.template.init(e,O.c.foreach.Sa(t))},update:function(e,t,n,r,i){return O.c.template.update(e,O.c.foreach.Sa(t),n,r,i)}},O.g.Q.foreach=u,O.e.I.foreach=a,O.c.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=a;var i=e.ownerDocument;"activeElement"in i&&(r=i.activeElement===e),i=t(),O.g.ea(i,n,"hasfocus",r,a),e.__ko_hasfocusUpdating=u}var i=r.bind(o,a),s=r.bind(o,u);O.a.n(e,"focus",i),O.a.n(e,"focusin",i),O.a.n(e,"blur",s),O.a.n(e,"focusout",s)},update:function(e,t){var n=O.a.d(t());e.__ko_hasfocusUpdating||(n?e.focus():e.blur(),O.r.K(O.a.Ba,o,[e,n?"focusin":"focusout"]))}},O.c.html={init:function(){return{controlsDescendantBindings:a}},update:function(e,t){O.a.ca(e,t())}};var z="__ko_withIfBindingData";D("if"),D("ifnot",u,a),D("with",a,u,function(e,t){return e.createChildContext(t)}),O.c.options={update:function(t,n,r){"select"!==O.a.u(t)&&e(Error("options binding applies only to SELECT elements"));for(var i=0==t.length,o=O.a.V(O.a.fa(t.childNodes,function(e){return e.tagName&&"option"===O.a.u(e)&&e.selected}),function(e){return O.k.q(e)||e.innerText||e.textContent}),u=t.scrollTop,s=O.a.d(n());0<t.length;)O.A(t.options[0]),t.remove(0);if(s){r=r();var l=r.optionsIncludeDestroyed;if("number"!=typeof s.length&&(s=[s]),r.optionsCaption){var f=c.createElement("option");O.a.ca(f,r.optionsCaption),O.k.T(f,p),t.appendChild(f)}n=0;for(var d=s.length;d>n;n++){var h=s[n];if(!h||!h._destroy||l){var f=c.createElement("option"),v=function(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n},g=v(h,r.optionsValue,h);O.k.T(f,O.a.d(g)),h=v(h,r.optionsText,g),O.a.cb(f,h),t.appendChild(f)}}for(s=t.getElementsByTagName("option"),n=l=0,d=s.length;d>n;n++)0<=O.a.i(o,O.k.q(s[n]))&&(O.a.bb(s[n],a),l++);t.scrollTop=u,i&&"value"in r&&R(t,O.a.ua(r.value),a),O.a.ub(t)}}},O.c.options.sa="__ko.optionValueDomData__",O.c.selectedOptions={init:function(e,t,n){O.a.n(e,"change",function(){var r=t(),i=[];O.a.o(e.getElementsByTagName("option"),function(e){e.selected&&i.push(O.k.q(e))}),O.g.ea(r,n,"value",i)})},update:function(t,n){"select"!=O.a.u(t)&&e(Error("values binding applies only to SELECT elements"));var r=O.a.d(n());r&&"number"==typeof r.length&&O.a.o(t.getElementsByTagName("option"),function(e){var t=0<=O.a.i(r,O.k.q(e));O.a.bb(e,t)})}},O.c.style={update:function(e,t){var n,r=O.a.d(t()||{});for(n in r)if("string"==typeof n){var i=O.a.d(r[n]);e.style[n]=i||""}}},O.c.submit={init:function(t,n,r,i){"function"!=typeof n()&&e(Error("The value for a submit binding must be a function")),O.a.n(t,"submit",function(e){var r,o=n();try{r=o.call(i,t)}finally{r!==a&&(e.preventDefault?e.preventDefault():e.returnValue=u)}})}},O.c.text={update:function(e,t){O.a.cb(e,t())}},O.e.I.text=a,O.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++O.c.uniqueName.ob;O.a.ab(e,n)}}},O.c.uniqueName.ob=0,O.c.value={init:function(e,t,n){function r(){s=u;var r=t(),i=O.k.q(e);O.g.ea(r,n,"value",i)}var i=["change"],o=n().valueUpdate,s=u;o&&("string"==typeof o&&(o=[o]),O.a.P(i,o),i=O.a.Ga(i)),!O.a.Z||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=O.a.i(i,"propertychange")||(O.a.n(e,"propertychange",function(){s=a}),O.a.n(e,"blur",function(){s&&r()})),O.a.o(i,function(t){var n=r;O.a.Ob(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5)),O.a.n(e,t,n)})},update:function(e,t){var n="select"===O.a.u(e),r=O.a.d(t()),i=O.k.q(e),o=r!=i;0===r&&0!==i&&"0"!==i&&(o=a),o&&(i=function(){O.k.T(e,r)},i(),n&&setTimeout(i,0)),n&&0<e.length&&R(e,r,u)}},O.c.visible={update:function(e,t){var n=O.a.d(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},O.c.click={init:function(e,t,n,r){return O.c.event.init.call(this,e,function(){var e={};return e.click=t(),e},n,r)}},O.v=function(){},O.v.prototype.renderTemplateSource=function(){e(Error("Override renderTemplateSource"))},O.v.prototype.createJavaScriptEvaluatorBlock=function(){e(Error("Override createJavaScriptEvaluatorBlock"))},O.v.prototype.makeTemplateSource=function(t,n){if("string"==typeof t){n=n||c;var r=n.getElementById(t);return r||e(Error("Cannot find template with ID "+t)),new O.l.h(r)}return 1==t.nodeType||8==t.nodeType?new O.l.O(t):void e(Error("Unknown template type: "+t))},O.v.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n)},O.v.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===u?a:this.makeTemplateSource(e,t).data("isRewritten")},O.v.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",a)},O.b("templateEngine",O.v);var J=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,W=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;O.za={vb:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return O.za.Gb(e,t)},n)},Gb:function(e,t){return e.replace(J,function(e,n,r,i,a,o,u){return b(u,n,t)}).replace(W,function(e,n){return b(n,"<!-- ko -->",t)})},kb:function(e){return O.s.ra(function(t,n){t.nextSibling&&O.Fa(t.nextSibling,e,n)})}},O.b("__tr_ambtns",O.za.kb),O.l={},O.l.h=function(e){this.h=e},O.l.h.prototype.text=function(){var e=O.a.u(this.h),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.h[e];var t=arguments[0];"innerHTML"===e?O.a.ca(this.h,t):this.h[e]=t},O.l.h.prototype.data=function(e){return 1===arguments.length?O.a.f.get(this.h,"templateSourceData_"+e):void O.a.f.set(this.h,"templateSourceData_"+e,arguments[1])},O.l.O=function(e){this.h=e},O.l.O.prototype=new O.l.h,O.l.O.prototype.text=function(){if(0==arguments.length){var e=O.a.f.get(this.h,"__ko_anon_template__")||{};return e.Aa===p&&e.ia&&(e.Aa=e.ia.innerHTML),e.Aa}O.a.f.set(this.h,"__ko_anon_template__",{Aa:arguments[0]})},O.l.h.prototype.nodes=function(){return 0==arguments.length?(O.a.f.get(this.h,"__ko_anon_template__")||{}).ia:void O.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})},O.b("templateSources",O.l),O.b("templateSources.domElement",O.l.h),O.b("templateSources.anonymousTemplate",O.l.O);var G;O.wa=function(t){t!=p&&!(t instanceof O.v)&&e(Error("templateEngine must inherit from ko.templateEngine")),G=t},O.va=function(t,n,r,i,a){if(r=r||{},(r.templateEngine||G)==p&&e(Error("Set a template engine before calling renderTemplate")),a=a||"replaceChildren",i){var u=v(i);return O.j(function(){var e=n&&n instanceof O.z?n:new O.z(O.a.d(n)),o="function"==typeof t?t(e.$data,e):t,e=h(i,a,o,e,r);"replaceNode"==a&&(i=e,u=v(i))},o,{Ka:function(){return!u||!O.a.X(u)},W:u&&"replaceNode"==a?u.parentNode:u})}return O.s.ra(function(e){O.va(t,n,r,e,"replaceNode")})},O.Mb=function(e,t,n,r,i){function a(e,t){g(t,s),n.afterRender&&n.afterRender(t,e)}function u(t,r){s=i.createChildContext(O.a.d(t),n.as),s.$index=r;var a="function"==typeof e?e(t,s):e;return h(o,"ignoreTargetNode",a,s,n)}var s;return O.j(function(){var e=O.a.d(t)||[];"undefined"==typeof e.length&&(e=[e]),e=O.a.fa(e,function(e){return n.includeDestroyed||e===p||e===o||!O.a.d(e._destroy)}),O.r.K(O.a.$a,o,[r,e,u,n,a])},o,{W:r})},O.c.template={init:function(e,t){var n=O.a.d(t());return"string"==typeof n||n.name||1!=e.nodeType&&8!=e.nodeType||(n=1==e.nodeType?e.childNodes:O.e.childNodes(e),n=O.a.Hb(n),new O.l.O(e).nodes(n)),{controlsDescendantBindings:a}},update:function(e,t,n,r,i){t=O.a.d(t()),n={},r=a;var u,s=o;"string"!=typeof t&&(n=t,t=n.name,"if"in n&&(r=O.a.d(n["if"])),r&&"ifnot"in n&&(r=!O.a.d(n.ifnot)),u=O.a.d(n.data)),"foreach"in n?s=O.Mb(t||e,r&&n.foreach||[],n,e,i):r?(i="data"in n?i.createChildContext(u,n.as):i,s=O.va(t||e,i,n,e)):O.e.Y(e),i=s,(u=O.a.f.get(e,"__ko__templateComputedDomDataKey__"))&&"function"==typeof u.B&&u.B(),O.a.f.set(e,"__ko__templateComputedDomDataKey__",i&&i.pa()?i:p)}},O.g.Q.template=function(e){return e=O.g.aa(e),1==e.length&&e[0].unknown||O.g.Eb(e,"name")?o:"This template engine does not support anonymous templates nested within its templates"},O.e.I.template=a,O.b("setTemplateEngine",O.wa),O.b("renderTemplate",O.va),O.a.Ja=function(e,t,n){return e=e||[],t=t||[],e.length<=t.length?d(e,t,"added","deleted",n):d(t,e,"deleted","added",n)},O.b("utils.compareArrays",O.a.Ja),O.a.$a=function(e,t,n,o,u){function s(e,t){w=f[t],m!==t&&(S[e]=w),w.na(m++),i(w.M),v.push(w),y.push(w)}function c(e,t){if(e)for(var n=0,r=t.length;r>n;n++)t[n]&&O.a.o(t[n].M,function(r){e(r,n,t[n].U)})}t=t||[],o=o||{};var l=O.a.f.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===p,f=O.a.f.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],d=O.a.V(f,function(e){return e.U}),h=O.a.Ja(d,t),v=[],g=0,m=0,b=[],y=[];t=[];for(var w,_,x,S=[],d=[],E=0;_=h[E];E++)switch(x=_.moved,_.status){case"deleted":x===p&&(w=f[g],w.j&&w.j.B(),b.push.apply(b,i(w.M)),o.beforeRemove&&(t[E]=w,y.push(w))),g++;break;case"retained":s(E,g++);break;case"added":x!==p?s(E,x):(w={U:_.value,na:O.m(m++)},v.push(w),y.push(w),l||(d[E]=w))}c(o.beforeMove,S),O.a.o(b,o.beforeRemove?O.A:O.removeNode);for(var k,E=0,l=O.e.firstChild(e);w=y[E];E++){for(w.M||O.a.extend(w,r(e,n,w.U,u,w.na)),g=0;h=w.M[g];l=h.nextSibling,k=h,g++)h!==l&&O.e.Pa(e,h,k);!w.Ab&&u&&(u(w.U,w.M,w.na),w.Ab=a)}c(o.beforeRemove,t),c(o.afterMove,S),c(o.afterAdd,d),O.a.f.set(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult",v)},O.b("utils.setDomNodeChildrenFromArrayMapping",O.a.$a),O.C=function(){this.allowTemplateRewriting=u},O.C.prototype=new O.v,O.C.prototype.renderTemplateSource=function(e){var t=9>O.a.Z||!e.nodes?o:e.nodes();return t?O.a.L(t.cloneNode(a).childNodes):(e=e.text(),O.a.ta(e))},O.C.oa=new O.C,O.wa(O.C.oa),O.b("nativeTemplateEngine",O.C),O.qa=function(){var t=this.Db=function(){if("undefined"==typeof f||!f.tmpl)return 0;try{if(0<=f.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,i){i=i||{},2>t&&e(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));var a=n.data("precompiled");return a||(a=n.text()||"",a=f.template(o,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),n.data("precompiled",a)),n=[r.$data],r=f.extend({koBindingContext:r},i.templateOptions),r=f.tmpl(a,n,r),r.appendTo(c.createElement("div")),f.fragments={},r},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){c.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},t>0&&(f.tmpl.tag.ko_code={open:"__.push($1 || '');"},f.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},O.qa.prototype=new O.v,n=new O.qa,0<n.Db&&O.wa(n),O.b("jqueryTmplTemplateEngine",O.qa)}var a=!0,o=null,u=!1,s=window,c=document,l=navigator,f=window.jQuery,p=void 0;"function"==typeof n&&"object"==typeof exports&&"object"==typeof module?i(module.exports||exports):"function"==typeof r&&r.amd?r("knockout",["exports"],i):i(s.ko={})}(),r("utils",[],function(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,n=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,r=!!window.chrome&&!e,i=!!document.documentMode||!1,a=function(e){return e.constructor===Array},o=function(e,t,n){var r=typeof n;a(n)&&(r="array"),e.push({path:t,type:r})},u=function(e){return a(e)?!1:e instanceof Object?!0:!1},s={bind:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n++){var r=e[t[n]];r instanceof Function&&(e[t[n]]=function(){return r.apply(e,arguments)})}},trim:function(e){for(var t in e)"string"==typeof e[t]&&(e[t]=e[t]?e[t].trim():"");return e},resolveJsonValue:function(e,t){var n=e;if(t&&t.length){if("$rawData"===t)return n;var r=t.split(".");if(r instanceof Array)for(var i=0;i<r.length;i++)n=n.hasOwnProperty(r[i])?n[r[i]]:""}return n},resolveJsonPath:function(e){var t=[],n=function(e,r){for(var i in r)o(t,e+i,r[i]),u(r[i])&&n(e+i+".",r[i])};return o(t,"$rawData",e),n("",e),t},isValidURL:function(e){var t;return t=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/?|cc:\\/\\/?(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"),t.test(e)},isValidURI:function(e){return new RegExp("^((cc:|https:|http:|[/][/]|www.)([a-z]|[A-Z]|[0-9]|[/.])*)$","g").test(e)},jsonToFormattedString:function(e){if("object"!=typeof e)return e;try{return JSON.stringify(e,null,4)}catch(t){return"error try to stringify json"}},getTypeFilteredOptions:function(e,t){("enum"===t||"textarea"===t)&&(t="string");for(var n=[],r=0;r<e.length;r++)t===e[r].type?n.push(e[r].path):"string"===t&&"number"===e[r].type&&n.push(e[r].path);return n},browser:{isOpera:e,isFirefox:t,isSafari:n,isChrome:r,isIE:i},slugify:function(e){return e||(e=""),String(e).replace(/\W/g,"_").toLowerCase()},convertDateToLocal:function(e){var t=new Date(e);return t},convertDateToISO:function(e){var t=new Date(Date.parse(e)).toISOString();return t}};return s}),r("base-class",["require"],function(){var e=!1,t=/xyz/.test(function(){})?/\b_super\b/:/.*/;return this.Class=function(){},Class.extend=function(n){function r(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var a=new this;e=!1;for(var o in n)a[o]="function"==typeof n[o]&&"function"==typeof i[o]&&t.test(n[o])?function(e,t){return function(){var n=this._super;this._super=i[e];var r=t.apply(this,arguments);return this._super=n,r}}(o,n[o]):n[o];return r.prototype=a,r.prototype.constructor=r,r.extend=arguments.callee,r},this.Class}),r("logger",[],function(){var e="object"==typeof window.console?window.console:"",t=function(){function t(e){this.category=e,t.prototype.setLevel(t.globalLevel)}return t.NONE=4,t.ERROR=3,t.WARN=2,t.SUCCESS=1,t.INFO=0,t.globalLevel=t.NONE,t.traceCaller=!1,t.getGlobalLevel=function(){return t.globalLevel},t.setGlobalLevel=function(e){t.globalLevel=e},t.getCallerTracing=function(){return t.traceCaller},t.setCallerTracing=function(e){t.traceCaller=e},t.listeners=[],t.addListener=function(e){t.listeners.push(e)},t.callListeners=function(e,n,r){for(var i in t.listeners)t.listeners[i].call(this,e,n,r)},t.prototype.category="",t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){this.level=e},t.prototype.canLog=function(e){return t.globalLevel<t.NONE&&t.globalLevel<=e||this.level<t.NONE&&this.level<=e},t.prototype.format=function(e){var n="";try{t.traceCaller&&arguments.callee.caller.caller.$name&&(n="@"+arguments.callee.caller.caller.$name+" ")
}catch(r){}return n+"["+this.category+"] "+e.toString()},t.prototype.error=function(n){var r=this.format(n);e&&this.canLog(t.ERROR)&&e.error(r),t.callListeners(t.ERROR,this.category,n)},t.prototype.warn=function(n){var r=this.format(n);e&&this.canLog(t.WARN)&&e.warn(r),t.callListeners(t.WARN,this.category,n)},t.prototype.success=function(n){var r=this.format(n);e&&this.canLog(t.SUCCESS)&&e.info(r),t.callListeners(t.SUCCESS,this.category,n)},t.prototype.info=function(n){var r=this.format(n);e&&this.canLog(t.INFO)&&e.log(r),t.callListeners(t.INFO,this.category,n)},t.prototype.log=t.prototype.info,t}();return t}),r("v-logger-service",["logger","utils"],function(e,t){var n={},r=function(r){return n[t.slugify(r)]?n[t.slugify(r)]:n[t.slugify(r)]=new e(t.slugify(r))},i=function(e){return n[t.slugify(e)]?n[t.slugify(e)]:null};return{create:r,getInstance:i,global:e}}),r("v-i18n-service",[],function(){var e=window.Messages||parent.window.Messages,t=function(){return e?e.apply(this,arguments):arguments[0]};return{messages:t}}),r("services/base-data-service",["base-class","v-logger-service","v-i18n-service"],function(e){var t=null,n=e.extend({init:function(e){this.setBaseURL(e)},setBaseURL:function(e){this.baseUrl=e},transport:{get:function(){return null},getById:function(){return null},update:function(){return null},create:function(){return null},remove:function(){return null}},update:function(e,t){var n=$.Deferred();return this.transport.update.call(this,e,t,function(e,t){n.resolve(e,t)},function(e,t){n.reject(e,t)}),n.promise()},create:function(e){var t=$.Deferred();return this.transport.create.call(this,e,function(e,n){t.resolve(e,n)},function(e,n){t.reject(e,n)}),t.promise()},remove:function(e){var t=$.Deferred();return this.transport.remove.call(this,e,function(e,n){t.resolve(e,n)},function(e,n){t.reject(e,n)}),t.promise()},getById:function(e,t){var n=$.Deferred();return this.transport.getById.call(this,e,t,function(e,t){n.resolve(e,t)},function(e,t){n.reject(e,t)}),n.promise()},get:function(e){var t=$.Deferred(),n=this;return this.transport.get.call(this,e,function(e,r){n.set(e),t.resolve(e,r)},function(e,n){t.reject(e,n)}),t.promise()},getList:function(){},setCustomClass:function(e){this.baseUrl="cc://"+e},transformSettingsAttrToURLParamsObj:function(e){var t={};if(e)for(var n in e)t.hasOwnProperty(n)||(t[n]=[]),t[n].push(e[n]);return t},transformSettingsAttrToURLParams:function(e){var t=this.transformSettingsAttrToURLParamsObj(e),n="";if(t){for(var r in t)n+=r+"="+t[r]+"&";n=n.length?n.substring(0,n.length-1):""}return n},set:function(e){t=e},data:function(){return t}});return n}),r("services/base-rest-data-service",["require","jquery","services/base-data-service","utils"],function(e,t,n,r){var i=function(e,n,r,i){var a=function(e){var n;try{n=t.parseJSON(e.responseText)}catch(r){n={errors:{DataService:["unable to parse error return from server end point."]}}}i.reject(n)};t.ajax({type:e,url:this.baseUrl+(n||""),dataType:"json",contentType:"application/json",data:r&&JSON.stringify(r),cache:!1,success:function(e){i.resolve(e)},error:a})},a=n.extend({init:function(e,n){return this.baseUrl=e,this.options={update:"PUT",create:"POST",remove:"DELETE",get:"GET"},t.extend(this.options,n),this},setBaseURL:function(e){this.baseUrl=e},update:function(e,n){var a=t.Deferred(),o=this.validate(r.trim(n));return o?a.reject({errors:o}):i.call(this,this.options.update,"/"+e,n,a),a.promise()},create:function(e){var n=t.Deferred(),a=this.validate(r.trim(e));return a?n.reject({errors:a}):i.call(this,this.options.create,null,e,n),n.promise()},remove:function(e,n){var r=t.Deferred();return i.call(this,this.options.remove,"/"+e,n,r),r.promise()},get:function(e){var n=t.Deferred();return i.call(this,this.options.get,"/"+e,null,n),n.promise()},getList:function(){var e=t.Deferred();return i.call(this,this.options.get,null,null,e),e.promise()},validate:function(){return null},isRequired:function(e,t,n){return e&&e[t]&&e[t].length||(n=n||{},n[t]=Messages("validation.required")),n}});return a}),r("services/base-event-data-service",["require","postal","utils","services/base-data-service","v-logger-service","v-i18n-service"],function(e,t,n,r,i,a){var o=i.create("datasource"),u=function(e,n){t.publish({channel:this.channelName,topic:e+".SUCCESS",data:n})},s=function(e,n){o.error(a.messages("VRuntime.datasource.response.error",JSON.stringify(n))),t.publish({channel:this.channelName,topic:e+".ERROR",data:n})},c=function(e){t.publish({channel:this.channelName,topic:e+".PROCESSING",data:null})},l=function(e,n){t.publish({channel:this.channelName,topic:e+".UPDATED",data:n})},f={fetch:"FETCH",fetchById:"FETCHBYID",create:"CREATE",update:"UPDATE",remove:"DELETE"},p=r.extend({init:function(e,n,r){this._super(n);var i=this;this.baseUrl=n,this.channel=t.channel(e),this.channelName=e,this.properties=r,this.resetDatasourceSubscriptions(),this.on(f.fetch,function(e){var t=null;e&&e.urlParamsObj&&(t=e.urlParamsObj),c.call(i,f.fetch),i.transport.get.call(i,t,function(e){i.set(e),u.call(i,f.fetch,e)},function(e){s.call(i,f.fetch,e)})}),this.on(f.fetchById,function(e){var t=null,n=null;e&&e.urlParamsObj&&(t=e.urlParamsObj),e&&e.id&&(n=e.id),c.call(i,f.fetchById),i.transport.getById.call(i,n,t,function(e){i.set(e),u.call(i,f.fetchById,e)},function(e){s.call(i,f.fetchById,e)})}),this.on(f.update,function(e){var t=null;e&&e.id&&(t=e.id),c.call(i,f.update),i.transport.update.call(i,t,e,function(e){u.call(i,f.update,e)},function(e){s.call(i,f.update,e)})}),this.on(f.create,function(e){c.call(i,f.create),i.transport.create.call(i,e,function(e){u.call(i,f.create,e)},function(e){s.call(i,f.create,e)})}),this.on(f.remove,function(e){var t=null;e&&e.id&&(t=e.id),c.call(i,f.remove),i.transport.remove.call(i,t,function(e){u.call(i,f.remove,e)},function(e){s.call(i,f.remove,e)})});var a=function(e){var t=this;e&&e.length&&this.on(e,function(n){l.call(t,e,n)})};if(r)for(var o in r)a.call(this,o)},trigger:function(e,t){e&&e.length&&(f.hasOwnProperty(e)&&(e=e.toUpperCase()),this.channel.publish({topic:e,data:t}))},subscribe:function(e,t){this.on(e,t)},on:function(e,t){e&&e.length&&"function"==typeof t&&(f.hasOwnProperty(e)&&(e=e.toUpperCase()),this.channel.subscribe({topic:e,callback:t}))},set:function(e){this._super(e),this.trigger("CHANGE",e)},resetDatasourceSubscriptions:function(){var e;e=t.utils.getSubscribersFor(this.channelName,"CHANGE"),$.each(e,function(e,t){t&&t.unsubscribe()});for(var n in f)e=t.utils.getSubscribersFor(this.channelName,f[n]),$.each(e,function(e,t){t&&t.unsubscribe()}),e=t.utils.getSubscribersFor(this.channelName,f[n]+".SUCCESS"),$.each(e,function(e,t){t&&t.unsubscribe()}),e=t.utils.getSubscribersFor(this.channelName,f[n]+".PROCESSING"),$.each(e,function(e,t){t&&t.unsubscribe()}),e=t.utils.getSubscribersFor(this.channelName,f[n]+".ERROR"),$.each(e,function(e,t){t&&t.unsubscribe()});for(var r in this.properties)e=t.utils.getSubscribersFor(this.channelName,r),$.each(e,function(e,t){t&&t.unsubscribe()}),e=t.utils.getSubscribersFor(this.channelName,r+".UPDATED"),$.each(e,function(e,t){t&&t.unsubscribe()})}});return p}),r("services/proxy-data-service",["require","postal","utils","services/base-event-data-service","v-logger-service","v-i18n-service","jquery.form"],function(e,t,n,r,i,a){var o=i.create("datasource"),u=function(e,t,n,r){var i=$.Deferred(),u=this.contentType?this.contentType:"application/json",s=this.baseUrl;t&&(s=s+"/"+t.toString()),r&&(s=s+"?"+r),s=encodeURI(s);var c=$.extend({},{"Service-End-Point":s},this.headers),l=function(e){var t;try{t=$.parseJSON(e.responseText).responseText||$.parseJSON(e.responseText).error||$.parseJSON(e.responseText).error_message}catch(n){t=a.messages("DataServiceManagerImpl.webservice.exception")}o.error(a.messages("VRuntime.datasource.response.error",t)),i.reject(t,e)};return n&&"object"==typeof n&&e&&"POST"===e&&""===s?$(n).ajaxSubmit({type:"POST",url:"upload",contentType:"multipart/form-data",headers:c,success:function(e,t,n){i.resolve(e,n)},error:l}):(n?n=JSON.stringify($.extend({},n)):u="",$.ajax({type:e,url:this.transport.api,headers:c,contentType:u,data:n,cache:!1,success:function(e,t,n){var r=e.hasOwnProperty("data")?e.data:e;i.resolve(r,n)},error:l})),i.promise()},s=r.extend({init:function(e,t){this._super.apply(this,arguments),arguments.length>=1&&(this.baseUrl="upload"===arguments[1]?"":arguments[1]),arguments.length>=3&&(this.headers=arguments[2]),o.info("rest initializing "+t)},transport:{api:"api/v2/proxy",get:function(e,t,n){var r=this.transformSettingsAttrToURLParams(e),i=this;u.call(this,"GET",null,null,r).done(function(e,n){i.set(e),t(e,n)}).fail(function(e,t){n(e,t)})},getById:function(e,t,n,r){var i=this.transformSettingsAttrToURLParams(t);u.call(this,"GET",e,null,i).done(function(e,t){n(e,t)}).fail(function(e,t){r(e,t)})},update:function(e,t,n,r){t=$.extend(!0,{},t?t:null),u.call(this,"PUT",e,t,null).done(function(e,t){n(e,t)}).fail(function(e,t){r(e,t)})},create:function(e,t,n){u.call(this,"POST",null,e,null).done(function(e,n){t(e,n)}).fail(function(e,t){n(e,t)})},remove:function(e,t,n){u.call(this,"DELETE",e,null,null).done(function(e,n){t(e,n)}).fail(function(e,t){n(e,t)})}}});return s}),r("services/realtime-data-service",["jquery","services/base-event-data-service","v-logger-service","v-i18n-service"],function(e,t,n,r){var i=!1;window.WebSocket&&(i=!0);var a=n.create("datasource"),o=function(){var e,t,n,r="http:"==window.location.protocol?"ws:":"wss:",i=document.location.hostname;if(t=r+"//"+i,document.baseURI)t=document.baseURI;else if(document.getElementsByTagName("base").length){var a=document.getElementsByTagName("base")[0];a&&a.getAttribute("href")&&(t+=a.getAttribute("href"))}e=t.substring(t.indexOf("://")+3);var o="api/v2/websocket";return n="/"===e.slice(-1)?r+"//"+e+o:r+"//"+e+"/"+o},u=t.extend({init:function(){this._super.apply(this,arguments);var e=this;window.onclose=function(){e.transport.close.call(e)}},transport:{api:o(),open:function(e,t){var n=this,i="";if("undefined"!=typeof window.WebSocket){var o=1;if(null==this.websocket||this.websocket&&(3==this.websocket.readyState||2==this.websocket.readyState))this.websocket=new WebSocket(this.transport.api+"?serviceEndPoint="+encodeURI(this.baseUrl)),this.websocket.onopen=function(){a.success("websocket opened "+n.baseUrl),"function"==typeof e&&e()},this.websocket.onclose=function(){var e=r.messages("VRuntime.datasource.websocket.closed",n.baseUrl);a.warn(e),"function"==typeof t&&t(e)},this.websocket.onerror=function(e){a.error(e.data),"function"==typeof t&&t(e.data)};else if(this.websocket&&this.websocket.readyState&&1===this.websocket.readyState)a.success("websocket already opened "+this.baseUrl),"function"==typeof e&&e();else{var u=function(){1===n.websocket.readyState?(a.success("websocket opened "+n.baseUrl),"function"==typeof e&&e()):o>5?(i=r.messages("VRuntime.datasource.endpoint.unavailable",n.baseUrl),a.error(i),"function"==typeof t&&t(i)):setTimeout(function(){u()},1e3),o++};u()}}else i=r.messages("VRuntime.datasource.websocket.notSupported"),a.error(i),"function"==typeof t&&t(i)},close:function(){this.websocket&&this.websocket.readyState&&4!==this.websocket.readyState&&this.websocket.close()},get:function(e,t,n){var r=this,i=function(){r.websocket.onmessage=function(e){var n=e.data;if(n)try{n=JSON.parse(n)}catch(i){}finally{r.set(n),"function"==typeof t&&t(n)}}};this.transport.open.call(this,i,n)},update:function(e){var t=this,n=function(){a.info("websocket send "+e),t.websocket.send(e)},r=function(){};this.transport.open.call(this,n,r)}},update:function(e){this.transport.update.call(this,e)},create:function(){},remove:function(){},getById:function(){},get:function(e,t){this.transport.get.call(this,null,e,t)},open:function(e,t){this.transport.open.call(this,e,t)},close:function(){this.transport.close.call(this)}});return u}),r("v-datasource-service",["services/base-rest-data-service","services/proxy-data-service","services/realtime-data-service","utils"],function(e,t,n,r){var i=function(e){return e&&e.length&&e.length>0&&(e=e.toLowerCase(),"ws://"===e.substring(0,5)||"wss://"===e.substring(0,6))?!0:!1},a={},o=function(e,o,u){var s=r.slugify(e);return a[s]instanceof t&&a[s]instanceof n||(a[s]=i(o)?new n(s,o,u):new t(s,o,u)),a[s]},u=function(e){return s(e)},s=function(e){var t=a[r.slugify(e)];return t},c=function(e){e&&(e=r.slugify(e),"undefined"!=typeof u(e)&&delete a[e])},l=function(){a={}},f={DataService:e,ProxyDataService:t,ProxyRealtimeDataService:n,create:o,get:u,getInstance:s,destroy:c,destroyAll:l};return f}),r("v-binder-service",["utils","jquery","v-datasource-service"],function(e,t,n){var r={},i=function(e){a(e),o(e),u(e),s(e)},a=function(e){e&&(r[e.id]&&t.each(r[e.id],function(e,t){t.unsubscribe()}),delete r[e.id])},o=function(t){var n=t.widgetSettings.events,r=function(n){var r=n.datasource_name?n.datasource_name:t.widgetSettings.datasource_name;if(r.length&&n.property.length){var i=function(t,r){VRuntime.postal.publish({channel:e.slugify(n.datasource_name),topic:n.property,data:r})};t.$view.on(n.event,i)}};if(n&&n.outbound)for(var i=0;i<n.outbound.length;i++)r(n.outbound[i])},u=function(t){var n=t.widgetSettings.events,i=function(n){if("function"==typeof t[n.handler]){r[t.id]||(r[t.id]={});var i=n.datasource_name?n.datasource_name:t.widgetSettings.datasource_name;i.length&&n.property.length&&(r[t.id][n.property.toUpperCase()]=VRuntime.postal.subscribe({channel:e.slugify(i),topic:n.property+".UPDATED",callback:function(e){t[n.handler].call(t,e)}}).distinctUntilChanged())}};if(n&&n.inbound)for(var a=0;a<n.inbound.length;a++)i(n.inbound[a])},s=function(e){var t=e.id;if(e.widgetSettings&&e.widgetSettings.global&&e.widgetSettings.global.datasource&&e.widgetSettings.global.datasource.name){t=e.widgetSettings.global.datasource.name,r[e.id]||(r[e.id]={});var i=function(e,t){return'<div class="alert alert-error"><small> <strong>'+e+"</strong> "+t+'</small><button type="button" class="close" data-dismiss="alert">&times;</button></div>'},a=function(){return'<i class="icon-spinner icon-spin icon-large icon-3x"></i>'},o=function(t){e.$view.parents(".module").removeClass("loading"),e.$view.siblings(".icon-spinner, .alert").remove(),"function"==typeof e.update&&e.update.call(e,t)},u=function(t){e.$view.parents(".module").removeClass("loading"),e.$view.siblings(".icon-spinner, .alert").remove(),"function"==typeof e.updateById&&e.updateById.call(e,t)},s=function(){},c=function(t){e.$view.parents(".module").removeClass("loading"),e.$view.siblings(".icon-spinner, .alert").remove(),e.$view.before(i("",t))},l=function(){e.$view.parents(".module").addClass("loading"),e.$view.siblings(".icon-spinner, .alert").remove(),e.$view.before(a())},f=n.get(t);f&&(r[e.id].FETCH_SUCCESS=f.channel.subscribe({topic:"FETCH.SUCCESS",callback:o}),r[e.id].FETCH_ERROR=f.channel.subscribe({topic:"FETCH.ERROR",callback:c}),r[e.id].FETCH_PROCESSING=f.channel.subscribe({topic:"FETCH.PROCESSING",callback:l}),r[e.id].FETCHBYID_SUCCESS=f.channel.subscribe({topic:"FETCHBYID.SUCCESS",callback:u}),r[e.id].FETCHBYID_ERROR=f.channel.subscribe({topic:"FETCHBYID.ERROR",callback:c}),r[e.id].FETCHBYID_PROCESSING=f.channel.subscribe({topic:"FETCHBYID.PROCESSING",callback:l}),r[e.id].CREATE_SUCCESS=f.channel.subscribe({topic:"CREATE.SUCCESS",callback:s}),r[e.id].CREATE_ERROR=f.channel.subscribe({topic:"CREATE.ERROR",callback:c}),r[e.id].CREATE_PROCESSING=f.channel.subscribe({topic:"CREATE.PROCESSING",callback:l}),r[e.id].UPDATE_SUCCESS=f.channel.subscribe({topic:"UPDATE.SUCCESS",callback:s}),r[e.id].UPDATE_ERROR=f.channel.subscribe({topic:"UPDATE.ERROR",callback:c}),r[e.id].UPDATE_PROCESSING=f.channel.subscribe({topic:"UPDATE.PROCESSING",callback:l}),r[e.id].REMOVE_SUCCESS=f.channel.subscribe({topic:"REMOVE.SUCCESS",callback:s}),r[e.id].REMOVE_ERROR=f.channel.subscribe({topic:"REMOVE.ERROR",callback:c}),r[e.id].REMOVE_PROCESSING=f.channel.subscribe({topic:"REMOVE.PROCESSING",callback:l}))}},c=function(){t.each(r,function(e){t.each(r[e],function(e,t){t.unsubscribe()})}),r={}},l={bind:i,unbind:a,unbindAll:c};return l}),r("views/base-view",["require","knockout","jquery","base-class"],function(e,t,n,r){var i=r.extend({init:function(){var e=arguments[1]||{},r={templatePath:null,className:""};this.id=arguments[0],this.errors=t.observableArray(),this.options=n.extend(!0,{},r,e),this.$view=n("<div/>",{id:this.id,"class":this.options.className})},loadTemplate:function(){var t=this,r=n.Deferred(),i="",a="",o="";if(this.options.templatePath&&(a=this.options.templatePath.replace(/[/\\.]/g,"_"),o=a.replace(/\W/g,"_").toLowerCase()),this.tmpl)r.resolve(t.$view);else{var u=App.templates[a];u||App._templates[a]&&(u=App._templates[a]()),u?(t.$view.html(u),t.tmpl=!0,r.resolve(t.$view)):App._templates&&App._templates[o]?(i=App._templates[o](),t.$view.html(i),t.tmpl=!0,r.resolve(t.$view)):e(["text!"+this.options.templatePath],function(e){t.$view.html(e),t.tmpl=!0,App.templates[t.options.templatePath.replace(/[/\\.]/g,"_")]=e,r.resolve(t.$view)})}return r.promise()},bindData:function(e){return e?t.applyBindings(e,document.getElementById(this.id)):t.applyBindings(this,document.getElementById(this.id)),this},afterRender:function(){return this},show:function(e){return this.$view.show(e),this},hide:function(e){return this.$view.hide(e),this},clearErrors:function(){this.$view.find(".alert").removeClass("alert-error").hide(),this.errors([])},showErrors:function(e){var t;this.clearErrors();for(var n in e.errors)t=this.$view.find('[for="'+n+'"]').text(),this.errors.push({fieldId:n,fieldLabel:t,errMsg:e.errors[n]});this.$view.find(".alert").addClass("alert-error").show()},publish:function(e,t){App.router.trigger(e,t),n(document).trigger("App.*",{eventName:e,eventData:t})},subscribe:function(e,t){App.router.bind(e,t)}});return i}),r("views/base-widget",["knockout","views/base-view","utils"],function(e,t,n){var r=t.extend({init:function(e,t,n,r){this._super.apply(this,arguments),this.$view.css("display","none"),this.schema=t?t:this.schema,this.template=n?n:this.template,r?this.widgetSettings=r:""},template:null,schema:null,widgetSettings:null,_component:null,_initComponent:function(){null===this._component&&(this._component=this.$view)},_transformData:function(e){return e},beforeRender:function(){return this.$view.html(this.template),this},show:function(e){e=e?e:{},this.$view.show(e.speed,e.easing,e.callback)},render:function(){return this._initComponent(),this},getComponent:function(){return this._component},setComponent:function(e){this._component=e},update:function(){return this},_createViewModelFromSchema:function(){if(this.schema&&this.schema.properties){var t,n=this.schema.properties,r=[];for(var i in n)if("undefined"==typeof n[i].computed)t=n[i]["default"],this[i]="[object Array]"===Object.prototype.toString.call(t)?e.observableArray([]):e.observable(" ");else{for(var a=n[i].computed,o="",u=0;u<a.length;u++)o=a[u].name,t=n[i]["default"],this[o]="[object Array]"===Object.prototype.toString.call(t)?e.observableArray([]):e.observable(" ");this[i]=e.computed(function(){for(var e=0;e<a.length;e++)o=a[e].name,r[e]="default"===vm[o]()?"":vm[o]();return r.join(" ")},this)}}},_updateViewModelWithData:function(e){if(e=e?e:{},this.schema&&this.schema.properties&&this.widgetSettings){var t,r=this.schema.properties,i=this.widgetSettings.properties;for(var a in r)if("undefined"==typeof r[a].computed)i.hasOwnProperty(a)&&(t="object"!=typeof i[a]?i[a]:"undefined"==typeof i[a].$ref?i[a].value:n.resolveJsonValue(e,i[a].$ref),"undefined"!=typeof t&&this[a](t));else{for(var o=r[a].computed,u="",s=0;s<o.length;s++)u=o[s].name,i.hasOwnProperty(u)&&("object"!=typeof i[u]?this.vm[u](i[u]):"undefined"!=typeof i[u].$ref&&(t=n.resolveJsonValue(e,i[u].$ref),"undefined"!=typeof t&&this.vm[u](t)),aggrKey[s]="default"===this.vm[u]()?"":this.vm[u]());this[a](aggrKey.join(" "))}}},trigger:function(e,t){this.$view.trigger(e,t)}});return r}),r("views/base-directive",["require","base-class"],function(e,t){var n=t.extend({restrict:"E",replace:!0,scope:{},compile:function(){var e=this;return function(t,n,r){t.vElement=n,t.vAttrs=r,t.$on("$destroy",function(){e.vDestroy.call(e,t)}),e.vLink(t,n,r)}},vLink:function(){},vDestroy:function(e){e.vElement.off()}});return n}),r("v-widget-service",["jquery","utils","v-binder-service","views/base-widget","views/base-directive"],function(e,t,n,r,i){var a={},o=function(e,n,r,i){n=t.slugify(n);var o=e.extend(i);return a[n]=new o(n,null,null,r),a[n]},u=function(e){return s(e)},s=function(e){return e=t.slugify(e),a[e]},c=function(t,n,r){var i=t.widgetSettings,a=t.id,o=r.parents(".module"),u=o.find(".module-widget-controls");r.html("Loading..."),r.parent().addClass("module-widget").removeClass("add-module");var s=e('<span class="sprite data"/>');s.attr("data-widgetid",a),s.attr("rel","tooltip"),n=n?n:{},r.html(""),r.append(t.$view),t.beforeRender(n.beforeRender),t.render(n.render),t.afterRender(n.afterRender),t.show(n.show),u.find(".sprite").remove(),i&&i.global&&i.global.datasource&&(i.global.datasource.id&&s.attr("data-datasourceId",i.global.datasource.id),i.global.datasource.name&&(s.attr("data-datasourceName",i.global.datasource.name),s.attr("title",i.global.datasource.name)),u.prepend(s),o.attr("data-datasource",i.global.datasource.name))},l=function(e){e&&(e=t.slugify(e),"undefined"!=typeof s(e)&&(delete a[e],n.unbind(a)))},f=function(){n.unbindAll(),a={}},p={BaseWidget:r,BaseDirective:i,create:o,get:u,getInstance:s,render:c,destroy:l,destroyAll:f};return p}),r("v-angular/services/module-definition",["angular"],function(e){return e.module("vRuntime.services",[])}),r("v-angular/services/directive-binder",["angular","utils","./module-definition","postal","jquery"],function(e,t,n,r,i){return n.factory("directiveBinder",function(){var e={},n=function(e,t,n){a(e),null!==t&&c(e,t),null!==n&&o(e,n)},a=function(t){e[t._id]&&i.each(e[t._id],function(e,t){t.unsubscribe()}),delete e[t._id]},o=function(e,t){l(e._id),u(e,t),s(e,t)},u=function(e,n){var a=function(n){if(n.datasource_name.length&&n.property.length){var a=function(e,i){r.publish({channel:t.slugify(n.datasource_name),topic:n.property,data:i})};i("#holder"+e._id).on(n.event,a)}};if(n&&n.outbound)for(var o=0;o<n.outbound.length;o++)a(n.outbound[o])},s=function(n,i){var a=function(i){if("function"==typeof n[i.handler]){var a=i.datasource_name;a.length&&i.property.length&&(e[n._id][i.property.toUpperCase()]=r.subscribe({channel:t.slugify(a),topic:i.property+".UPDATED",callback:function(e){n[i.handler].call(n,e)}}).distinctUntilChanged())}};if(i&&i.inbound)for(var o=0;o<i.inbound.length;o++)a(i.inbound[o])},c=function(t,n){l(t._id),e[t._id].FETCH_SUCCESS=n.channel.subscribe({topic:"FETCH.SUCCESS",callback:function(e){var n=i("#holder"+t._id);n.find(".datasource-processing-overlay").remove(),f(t,e)}}),e[t._id].FETCH_ERROR=n.channel.subscribe({topic:"FETCH.ERROR",callback:function(e){var n=i("#holder"+t._id);n.find(".datasource-processing-overlay").remove();var r='<div class="alert alert-error"><small>'+e+'</small><button type="button" class="close" data-dismiss="alert">&times;</button></div>',a=i(r);n.prepend(a)}}),e[t._id].FETCH_PROCESSING=n.channel.subscribe({topic:"FETCH.PROCESSING",callback:function(){var e=i("#holder"+t._id);e.find(".alert-error").remove();var n=i('<i class="icon-spinner icon-spin icon-large icon-3x"></i>').addClass("datasource-processing-overlay").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#fff","z-index":1e4});e.append(n)}})},l=function(t){e[t]||(e[t]={})},f=function(e,n){var r=e._datasourceConfig;for(var i in r){var a=t.resolveJsonValue(n,r[i]);e[i]=a}e.$apply()},p=function(){i.each(e,function(t){i.each(e[t],function(e,t){t.unsubscribe()})}),e={}};return{bind:n,unbind:a,unbindAll:p}})}),r("v-angular/services/main",["./module-definition","./directive-binder"],function(e){return e}),r("v-angular/main",["angular","./services/main"],function(e,t){var n=e.module("vRuntime",[t.name]);return n}),r("v-runtime",["v-widget-service","v-binder-service","v-datasource-service","utils","postal","v-logger-service","v-i18n-service","base-class","views/base-view","knockout","v-angular/main"],function(e,t,n,r,i,a,o,u,s,c){var l={init:function(){return window.vRuntime=this,window.VRuntime=this,this},services:{widget:e,datasource:n,binder:t},widget:e,datasource:n,binder:t,logger:a,messages:o.messages,postal:i,utils:{datetime:{toLocal:r.convertDateToLocal,toISO:r.convertDateToISO},string:{slugify:r.slugify},browser:r.browser},BaseClass:u,BaseView:s};return window.ko=c,l.init()}),r("jquery",[],function(){if(window.jQuery)return window.jQuery;throw new Error("Missing required dependency: vRuntime requires jquery, please include jquery to your application")}),r("angular",[],function(){if(window.angular)return window.angular;throw new Error("Missing required dependency: vRuntime requires angular, please include angular to your application")}),n("v-runtime")});